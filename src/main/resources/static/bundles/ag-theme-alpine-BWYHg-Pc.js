import{R as a,r as t,a as Ue,c as et}from"./keen-slider.min-c4SukqQA.js";import{_ as tt,a as st,b as De,c as Ve,C as Ee,E as ge,d as ce,H as rt,G as nt,e as ot,f as at,g as ct,h as lt,i as it,R as ut,j as dt,T as pt,k as mt,l as ht,m as ft,n as Ct,o as gt,p as yt,q as Se,r as Rt,s as vt,t as wt,u as St,v as bt,F as Pt,w as Et,x as Me,V as kt,B as Mt,y as Ft}from"./main.esm-DowEJWUN.js";var Z=a.createContext({}),_e=a.createContext("default"),we=(e,s,r,n)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const u=e.newAgStackInstance();let d,l,c=!1;return u.then(h=>{if(c){s.destroyBean(h);return}d=h,l=d.getGui(),r.appendChild(l),Ie(n,d)}),()=>{c=!0,d&&(l?.remove(),s.destroyBean(d),n&&Ie(n,void 0))}},Ie=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},oe=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),ae=class Le{constructor(...s){this.classesMap={};for(const r of s)this.classesMap[r]=!0}setClass(s,r){if(!!this.classesMap[s]==r)return this;const o=new Le;return o.classesMap={...this.classesMap},o.classesMap[s]=r,o}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ye=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},Ae=a.version?.split(".")[0],ze=Ae==="16"||Ae==="17";function At(){return Ae==="19"}var be=!1;function Dt(e){return be||setTimeout(()=>be=!1,0),be=!0,e()}var ve=(e,s)=>{!ze&&e&&!be?et.flushSync(s):s()},xt=e=>{ze?e():a.startTransition(e)};function Gt(e,s,r){return a.useSyncExternalStore?a.useSyncExternalStore(e,s):r}function Pe(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const n=[],o=[],u=new Map,d=new Map;for(let l=0;l<s.length;l++){const c=s[l];d.set(c.instanceId,c)}for(let l=0;l<e.length;l++){const c=e[l];u.set(c.instanceId,c),d.has(c.instanceId)&&n.push(c)}for(let l=0;l<s.length;l++){const c=s[l],h=c.instanceId;u.has(h)||o.push(c)}return n.length===e.length&&o.length===0?e:n.length===0&&o.length===s.length?s:n.length===0?o:o.length===0?n:[...n,...o]}var je=t.forwardRef((e,s)=>{const{registry:r,context:n}=t.useContext(Z),o=t.useRef(null),u=t.useRef(null),d=t.useRef(null),l=t.useRef(null),c=t.useRef(null),h=t.useRef(),[p,P]=t.useState(),[R,C]=t.useState(),[w,v]=t.useState(),[g,i]=t.useState(()=>new ae),[E,B]=t.useState(()=>new ae("ag-hidden")),[S,y]=t.useState(()=>new ae("ag-hidden")),[_,D]=t.useState(()=>new ae("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>we(p,n,u.current),[p]);const L=t.useCallback(T=>{if(o.current=T,!T||n.isDestroyed()){h.current=n.destroyBean(h.current);return}const k={setInnerRenderer:(M,U)=>{P(M),v(U)},setChildCount:M=>C(M),toggleCss:(M,U)=>i(F=>F.setClass(M,U)),setContractedDisplayed:M=>y(U=>U.setClass("ag-hidden",!M)),setExpandedDisplayed:M=>B(U=>U.setClass("ag-hidden",!M)),setCheckboxVisible:M=>D(U=>U.setClass("ag-invisible",!M)),setCheckboxSpacing:M=>D(U=>U.setClass("ag-group-checkbox-spacing",M))},H=r.createDynamicBean("groupCellRendererCtrl",!0);H&&(h.current=n.createBean(H),h.current.init(k,T,d.current,l.current,c.current,je,e))},[]),O=t.useMemo(()=>`ag-cell-wrapper ${g.toString()}`,[g]),A=t.useMemo(()=>`ag-group-expanded ${E.toString()}`,[E]),m=t.useMemo(()=>`ag-group-contracted ${S.toString()}`,[S]),f=t.useMemo(()=>`ag-group-checkbox ${_.toString()}`,[_]),I=p?.componentFromFramework,$=I?p.componentClass:void 0,b=p==null&&w!=null,K=tt(w);return a.createElement("span",{className:O,ref:L,...e.colDef?{}:{role:h.current?.getCellAriaRole()}},a.createElement("span",{className:A,ref:l}),a.createElement("span",{className:m,ref:c}),a.createElement("span",{className:f,ref:d}),a.createElement("span",{className:"ag-group-value",ref:u},b?K:I?a.createElement($,{...p.params}):null),a.createElement("span",{className:"ag-group-child-count"},R))}),Oe=je,xe=t.createContext({setMethods:()=>{}}),Bt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:n,setMethods:o}=e,[{key:u,...d},l]=t.useState(s);return t.useEffect(()=>{r(c=>l(c))},[]),a.createElement(xe.Provider,{value:{setMethods:o}},a.createElement(n,{key:u,...d}))},It=t.memo(Bt),Ot=0;function We(){return`agPortalKey_${++Ot}`}var $e=class{constructor(e,s,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=We(),this.portalKey=We(),this.instanceCreated=this.isStatelessComponent()?ce.resolve(!1):new ce(o=>{this.resolveInstanceCreated=o})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const n=r[e];if(n)return n.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ce(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{this.componentInstance=s,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Ue.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function ke(e,s,r){for(const n of e){const o=s[n];o&&(r[n]=o)}}var re=class extends $e{constructor(){super(...arguments),this.awaitUpdateCallback=new ce(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=It}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ce(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,ke(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ce(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Wt=class extends re{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Tt=class extends re{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Nt=class extends re{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:n}=this;return e.label=s,e.icon=r,e.shake=n,e}},Ht=class extends re{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ce(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const s=new ce(r=>{this.resolveFilterPassCallback=r});this.setModel(e).then(()=>{s.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Ut=class extends re{constructor(){super(...arguments),this.awaitSetMethodsCallback=new ce(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function Ke(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ce.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Vt=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Ke(this.floatingFilterParams,e)}},_t=class extends re{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Ke(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Lt=class extends re{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},zt=class extends re{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},jt=class extends re{refresh(e){this.sourceParams=e,this.refreshProps()}},$t=class extends re{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Kt=class extends re{refresh(e){this.sourceParams=e,this.refreshProps()}},Jt=class extends re{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},qt=class extends re{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Ge(){De(231)}var Qt=1e3,Yt=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Qt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){ve(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Zt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Z),[n,o]=t.useState(),[u,d]=t.useState(),l=t.useRef(),c=t.useRef(null),h=t.useRef(null),p=t.useRef(null),P=t.useRef(),R=t.useRef();s&&!R.current&&(R.current=new Ee(()=>c.current));const C=t.useCallback(i=>{if(c.current=i,!i||!e.isAlive()||r.isDestroyed()){l.current=r.destroyBean(l.current);return}l.current=r.createBean(new ge);const E=()=>{const S=e.getSelectAllGui();S&&(h.current?.insertAdjacentElement("afterend",S),l.current.addDestroyFunc(()=>S.remove()))},B={setWidth:S=>{c.current&&(c.current.style.width=S)},toggleCss:(S,y)=>R.current.toggleCss(S,y),setUserStyles:S=>d(S),setAriaSort:S=>{c.current&&(S?Rt(c.current,S):vt(c.current))},setUserCompDetails:S=>o(S),getUserCompInstance:()=>P.current||void 0,refreshSelectAllGui:E,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(B,i,h.current,p.current,l.current),E()},[]);t.useLayoutEffect(()=>we(n,r,p.current,P),[n]),t.useEffect(()=>{e.setDragSource(c.current)},[n]);const w=t.useMemo(()=>!!(n?.componentFromFramework&&ye(n.componentClass)),[n]),v=n?.componentFromFramework,g=n?.componentClass;return a.createElement("div",{ref:C,style:u,className:"ag-header-cell",role:"columnheader"},a.createElement("div",{ref:h,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},v?w?a.createElement(g,{...n.params}):a.createElement(g,{...n.params,ref:P}):null))},Xt=t.memo(Zt),es=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},ts=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Z),[n,o]=t.useState(),[u,d]=t.useState(()=>new ae("ag-header-cell","ag-floating-filter")),[l,c]=t.useState(()=>new ae),[h,p]=t.useState(()=>new ae("ag-floating-filter-button","ag-hidden")),[P,R]=t.useState("false"),[C,w]=t.useState(),[,v]=t.useState(1),g=t.useRef(),i=t.useRef(null),E=t.useRef(null),B=t.useRef(null),S=t.useRef(null),y=t.useRef(),_=t.useRef(),D=M=>{M!=null&&y.current&&y.current(M)},L=t.useCallback(M=>{if(i.current=M,!M||!e.isAlive()||s.isDestroyed()){g.current=s.destroyBean(g.current);return}g.current=s.createBean(new ge),_.current=new ce(F=>{y.current=F});const U={toggleCss:(F,W)=>d(J=>J.setClass(F,W)),setUserStyles:F=>o(F),addOrRemoveBodyCssClass:(F,W)=>c(J=>J.setClass(F,W)),setButtonWrapperDisplayed:F=>{p(W=>W.setClass("ag-hidden",!F)),R(F?"false":"true")},setWidth:F=>{i.current&&(i.current.style.width=F)},setCompDetails:F=>w(F),getFloatingFilterComp:()=>_.current?_.current:null,setMenuIcon:F=>S.current?.appendChild(F)};e.setComp(U,M,S.current,E.current,g.current)},[]);t.useLayoutEffect(()=>we(C,s,E.current,D),[C]);const O=t.useMemo(()=>u.toString(),[u]),A=t.useMemo(()=>l.toString(),[l]),m=t.useMemo(()=>h.toString(),[h]),f=t.useMemo(()=>!!(C&&C.componentFromFramework&&ye(C.componentClass)),[C]),I=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),$=t.useMemo(()=>r.get("enableFilterHandlers"),[]),[b,K]=t.useState();t.useEffect(()=>{if(C?.componentFromFramework)if(I){const M=$?es:Vt,U=new M(C.params,()=>v(F=>F+1));D(U),K(U)}else Ge()},[C]);const T=b?.getProps(),k=C?.componentFromFramework,H=C?.componentClass;return a.createElement("div",{ref:L,style:n,className:O,role:"gridcell"},a.createElement("div",{ref:E,className:A,role:"presentation"},k?I?T&&a.createElement(xe.Provider,{value:{setMethods:M=>b.setMethods(M)}},a.createElement(H,{...T})):a.createElement(H,{...C.params,ref:f?()=>{}:D}):null),a.createElement("div",{ref:B,"aria-hidden":P,className:m,role:"presentation"},a.createElement("button",{ref:S,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},ss=t.memo(ts),rs=({ctrl:e})=>{const{context:s}=t.useContext(Z),[r,n]=t.useState(),[o,u]=t.useState(()=>new ae),[d,l]=t.useState(()=>new ae),[c,h]=t.useState("false"),[p,P]=t.useState(),[R,C]=t.useState(),w=t.useRef(),v=t.useRef(null),g=t.useRef(null),i=t.useRef(null),E=t.useRef(),B=t.useCallback(O=>{if(v.current=O,!O||!e.isAlive()||s.isDestroyed()){w.current=s.destroyBean(w.current);return}w.current=s.createBean(new ge);const A={setWidth:m=>{v.current&&(v.current.style.width=m)},toggleCss:(m,f)=>u(I=>I.setClass(m,f)),setUserStyles:m=>n(m),setHeaderWrapperHidden:m=>{const f=i.current;f&&(m?f.style.setProperty("display","none"):f.style.removeProperty("display"))},setHeaderWrapperMaxHeight:m=>{const f=i.current;f&&(m!=null?f.style.setProperty("max-height",`${m}px`):f.style.removeProperty("max-height"),f.classList.toggle("ag-header-cell-comp-wrapper-limited-height",m!=null))},setUserCompDetails:m=>C(m),setResizableDisplayed:m=>{l(f=>f.setClass("ag-hidden",!m)),h(m?"false":"true")},setAriaExpanded:m=>P(m),getUserCompInstance:()=>E.current||void 0};e.setComp(A,O,g.current,i.current,w.current)},[]);t.useLayoutEffect(()=>we(R,s,i.current),[R]),t.useEffect(()=>{v.current&&e.setDragSource(v.current)},[R]);const S=t.useMemo(()=>!!(R?.componentFromFramework&&ye(R.componentClass)),[R]),y=t.useMemo(()=>"ag-header-group-cell "+o.toString(),[o]),_=t.useMemo(()=>"ag-header-cell-resize "+d.toString(),[d]),D=R?.componentFromFramework,L=R?.componentClass;return a.createElement("div",{ref:B,style:r,className:y,role:"columnheader","aria-expanded":p},a.createElement("div",{ref:i,className:"ag-header-cell-comp-wrapper",role:"presentation"},D?S?a.createElement(L,{...R.params}):a.createElement(L,{...R.params,ref:E}):null),a.createElement("div",{ref:g,"aria-hidden":c,className:_}))},ns=t.memo(rs),os=({ctrl:e})=>{const{gos:s,context:r}=t.useContext(Z),{topOffset:n,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),u=t.useMemo(()=>s.get("tabIndex"),[]),[d,l]=t.useState(()=>e.getAriaRowIndex()),c=e.headerRowClass,[h,p]=t.useState(()=>o+"px"),[P,R]=t.useState(()=>n+"px"),C=t.useRef(null),[w,v]=t.useState(()=>e.getUpdatedHeaderCtrls()),g=t.useRef(),i=t.useRef(null),E=t.useCallback(y=>{if(i.current=y,!y||!e.isAlive()||r.isDestroyed()){g.current=r.destroyBean(g.current);return}g.current=r.createBean(new ge);const _={setHeight:D=>p(D),setTop:D=>R(D),setHeaderCtrls:(D,L,O)=>{const A=C.current,m=Pe(A,D,L);m!==A&&(C.current=m,ve(O,()=>v(m)))},setWidth:D=>{i.current&&(i.current.style.width=D)},setRowIndex:D=>{l(D)}};e.setComp(_,g.current,!1)},[]),B=t.useMemo(()=>({height:h,top:P}),[h,P]),S=t.useCallback(y=>{switch(e.type){case"group":return a.createElement(ns,{ctrl:y,key:y.instanceId});case"filter":return a.createElement(ss,{ctrl:y,key:y.instanceId});default:return a.createElement(Xt,{ctrl:y,key:y.instanceId})}},[]);return a.createElement("div",{ref:E,className:c,role:"row",style:B,tabIndex:u,"aria-rowindex":d},w.map(S))},as=t.memo(os),cs=({pinned:e})=>{const[s,r]=t.useState(!0),[n,o]=t.useState([]),{context:u}=t.useContext(Z),d=t.useRef(null),l=t.useRef(null),c=t.useRef(),h=e==="left",p=e==="right",P=!h&&!p,R=t.useCallback(v=>{if(d.current=v,!v||u.isDestroyed()){c.current=u.destroyBean(c.current);return}c.current=u.createBean(new rt(e));const g={setDisplayed:r,setCtrls:i=>o(i),setCenterWidth:i=>{l.current&&(l.current.style.width=i)},setViewportScrollLeft:i=>{d.current&&(d.current.scrollLeft=i)},setPinnedContainerWidth:i=>{d.current&&(d.current.style.width=i,d.current.style.minWidth=i,d.current.style.maxWidth=i)}};c.current.setComp(g,d.current)},[]),C=s?"":"ag-hidden",w=()=>n.map(v=>a.createElement(as,{ctrl:v,key:v.instanceId}));return h?a.createElement("div",{ref:R,className:"ag-pinned-left-header "+C,"aria-hidden":!s,role:"rowgroup"},w()):p?a.createElement("div",{ref:R,className:"ag-pinned-right-header "+C,"aria-hidden":!s,role:"rowgroup"},w()):P?a.createElement("div",{ref:R,className:"ag-header-viewport "+C,role:"rowgroup",tabIndex:-1},a.createElement("div",{ref:l,className:"ag-header-container",role:"presentation"},w())):null},Fe=t.memo(cs),ls=()=>{const[e,s]=t.useState(()=>new ae),[r,n]=t.useState(),{context:o}=t.useContext(Z),u=t.useRef(null),d=t.useRef(),l=t.useCallback(p=>{if(u.current=p,!p||o.isDestroyed()){d.current=o.destroyBean(d.current);return}d.current=o.createBean(new nt);const P={toggleCss:(R,C)=>s(w=>w.setClass(R,C)),setHeightAndMinHeight:R=>n(R)};d.current.setComp(P,p,p)},[]),c=t.useMemo(()=>"ag-header "+e.toString(),[e]),h=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:l,className:c,style:h,role:"presentation"},a.createElement(Fe,{pinned:"left"}),a.createElement(Fe,{pinned:null}),a.createElement(Fe,{pinned:"right"}))},is=t.memo(ls),us=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const n=r.parentElement;if(n){const o=document.createComment(e);return n.insertBefore(o,r),()=>{o.remove()}}}},[e])},he=us,ds=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ce(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},ps=e=>{const s=t.useRef(e),r=t.useRef(),n=t.useRef(!1),o=t.useRef(!1),[,u]=t.useState(0);n.current&&(o.current=!0),t.useEffect(()=>(n.current||(r.current=s.current(),n.current=!0),u(d=>d+1),()=>{o.current&&r.current?.()}),[])},ms=e=>{const[s,r]=t.useState(),n=t.useContext(Z),{context:o,popupSvc:u,gos:d,editSvc:l}=n,{editDetails:c,cellCtrl:h,eParentCell:p}=e;return ps(()=>{const{compDetails:P}=c,R=d.get("stopEditingWhenCellsLoseFocus");let C,w;if(!o.isDestroyed()){w=o.createBean(l.createPopupEditorWrapper(P.params));const v=w.getGui();if(e.jsChildComp){const y=e.jsChildComp.getGui();y&&v.appendChild(y)}const{column:g,rowNode:i}=h,E={column:g,rowNode:i,type:"popupCellEditor",eventSource:p,ePopup:v,position:c.popupPosition,keepWithinBounds:!0},B=u?.positionPopupByComponent.bind(u,E),S=u?.addPopup({modal:R,eChild:v,closeOnEsc:!0,closedCallback:()=>{h.onPopupEditorClosed()},anchorToElement:p,positionCallback:B,ariaOwns:p});C=S?S.hideFunc:void 0,r(w),e.jsChildComp?.afterGuiAttached?.()}return()=>{C?.(),o.destroyBean(w)}}),t.useLayoutEffect(()=>()=>{h.isCellFocused()&&s?.getGui().contains(ot(n))&&p.focus({preventScroll:!0})},[s]),s&&e.wrappedContent?Ue.createPortal(e.wrappedContent,s.getGui()):null},Te=t.memo(ms),hs=(e,s,r)=>{const{compProxy:n}=e;r(n);const o=n.getProps(),u=ye(s);return a.createElement(xe.Provider,{value:{setMethods:d=>n.setMethods(d)}},u?a.createElement(s,{...o}):a.createElement(s,{...o,ref:d=>n.setRef(d)}))},Ne=(e,s,r)=>e.compProxy?hs(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}),fs=(e,s,r,n,o)=>{const u=e.compDetails,d=u.componentClass,l=u.componentFromFramework&&!e.popup,c=u.componentFromFramework&&e.popup,h=!u.componentFromFramework&&e.popup;return l?Ne(e,d,s):c?a.createElement(Te,{editDetails:e,cellCtrl:n,eParentCell:r,wrappedContent:Ne(e,d,s)}):h&&o?a.createElement(Te,{editDetails:e,cellCtrl:n,eParentCell:r,jsChildComp:o}):null},Cs=(e,s,r,n,o,u)=>{const{context:d}=t.useContext(Z),l=t.useCallback(()=>{const c=o.current;if(!c)return;const h=c.getGui();h&&h.parentElement&&h.remove(),d.destroyBean(c),o.current=void 0},[]);t.useEffect(()=>{const c=e!=null,h=e?.compDetails&&!e.compDetails.componentFromFramework,p=s&&r==null;if(!(c&&h&&!p)){l();return}const R=e.compDetails;if(o.current){const w=o.current,g=w.refresh!=null&&e.force==!1?w.refresh(R.params):!1;if(g===!0||g===void 0)return;l()}R.newAgStackInstance().then(w=>{if(!w)return;const v=w.getGui();if(!v)return;(s?r:u.current).appendChild(v),o.current=w})},[e,s,n]),t.useEffect(()=>l,[])},Je=Cs,gs=({cellCtrl:e,parent:s})=>{const r=t.useRef(),n=t.useMemo(()=>{const{loadingComp:o}=e.getDeferLoadingCellRenderer();return o?{value:void 0,compDetails:o,force:!1}:void 0},[e]);if(Je(n,!1,void 0,1,r,s),n?.compDetails?.componentFromFramework){const o=n.compDetails.componentClass;return a.createElement(o,{...n.compDetails.params})}return a.createElement(a.Fragment,null)},ys=({cellCtrl:e,printLayout:s,editingCell:r})=>{const n=t.useContext(Z),{context:o}=n,{column:{colIdSanitised:u},instanceId:d}=e,l=t.useRef(),[c,h]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[p,P]=t.useState(),[R,C]=t.useState(1),[w,v]=t.useState(),[g,i]=t.useState(!1),[E,B]=t.useState(!1),[S,y]=t.useState(!1),[_,D]=t.useState(),L=t.useMemo(()=>e.isForceWrapper(),[e]),O=t.useMemo(()=>e.getCellAriaRole(),[e]),A=t.useRef(null),m=t.useRef(null),f=t.useRef(null),I=t.useRef(),$=t.useRef(),b=t.useRef(),K=t.useRef([]),T=t.useRef(),k=t.useRef(),[H,M]=t.useState(0),U=t.useCallback(G=>{k.current=G,M(V=>V+1)},[]),F=c!=null&&(g||S||E)&&(p==null||!!p.popup),W=L||F,J=t.useMemo(()=>e.getCellValueClass(),[e]),le=t.useCallback(G=>{if($.current=G,G){const V=G.isCancelBeforeStart&&G.isCancelBeforeStart();setTimeout(()=>{V?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(G))})}},[e]),ee=t.useRef();ee.current||(ee.current=new Ee(()=>A.current)),Je(c,W,k.current,H,I,A);const pe=t.useRef();t.useLayoutEffect(()=>{const G=pe.current,V=c;if(pe.current=c,G==null||G.compDetails==null||V==null||V.compDetails==null)return;T.current?.refreshVisibility();const q=G.compDetails,Y=V.compDetails;if(q.componentClass!=Y.componentClass||f.current?.refresh==null)return;f.current.refresh(Y.params)!=!0&&C(N=>N+1)},[c]),t.useLayoutEffect(()=>{if(!(p&&!p.compDetails.componentFromFramework)||o.isDestroyed())return;const V=p.compDetails,q=p.popup===!0,Y=V.newAgStackInstance();return Y.then(x=>{if(!x)return;const N=x.getGui();le(x),q||((L?b:A).current?.appendChild(N),x.afterGuiAttached?.()),D(x)}),()=>{Y.then(x=>{const N=x.getGui();e.disableEditorTooltipFeature(),o.destroyBean(x),le(void 0),D(void 0),N?.remove()})}},[p]);const Re=t.useCallback(G=>{if(b.current=G,!G||o.isDestroyed()||!e.isAlive()){const Y=K.current;K.current=[];for(const x of Y)x();return}let V;const q=Y=>{Y&&(G.insertAdjacentElement("afterbegin",Y.getGui()),K.current.push(()=>{wt(Y.getGui()),o.destroyBean(Y),T.current===V&&(T.current=void 0)}))};g&&q(e.createSelectionCheckbox()),S&&q(e.createDndSource()),E&&(V=e.createRowDragComp(),T.current=V,V&&(q(V),V.refreshVisibility()))},[e,o,S,E,g]),fe=t.useCallback(()=>{const G=!e.isCellSpanning()||m.current,V=A.current;if(!V||!G||!e||!e.isAlive()||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new ge);const q={toggleCss:(x,N)=>ee.current.toggleCss(x,N),setUserStyles:x=>v(x),getFocusableElement:()=>A.current,setIncludeSelection:x=>i(x),setIncludeRowDrag:x=>B(x),setIncludeDndSource:x=>y(x),getCellEditor:()=>$.current??null,getCellRenderer:()=>f.current??I.current,getParentOfValue:()=>k.current??b.current??A.current,setRenderDetails:(x,N,X)=>{const de=()=>{h(Q=>Q?.compDetails!==x||Q?.value!==N||Q?.force!==X?{value:N,compDetails:x,force:X}:Q)};if(x?.params?.deferRender&&!e.rowNode.group){const{loadingComp:Q,onReady:Ce}=e.getDeferLoadingCellRenderer();if(Q){h({value:void 0,compDetails:Q,force:!1}),Ce.then(()=>xt(de));return}}de()},setEditDetails:(x,N,X,de)=>{if(x){let Q;x.componentFromFramework&&(de?Q=new ds(x.params,()=>C(Ce=>Ce+1)):Ge()),P({compDetails:x,popup:N,popupPosition:X,compProxy:Q}),N||h(void 0)}else e.hasBrowserFocus()&&q.getFocusableElement().focus({preventScroll:!0}),$.current=void 0,P(void 0)},refreshEditStyles:(x,N)=>{if(!A.current)return;const{current:X}=ee;X.toggleCss("ag-cell-value",!W),X.toggleCss("ag-cell-inline-editing",!!x&&!N),X.toggleCss("ag-cell-popup-editing",!!x&&!!N),X.toggleCss("ag-cell-not-inline-editing",!x||!!N)}},Y=b.current||void 0;e.setComp(q,V,m.current??void 0,Y,s,r,l.current)},[]),z=t.useCallback(G=>{A.current=G,fe()},[]),me=t.useCallback(G=>{m.current=G,fe()},[]),te=t.useMemo(()=>!!(c?.compDetails?.componentFromFramework&&ye(c.compDetails.componentClass)),[c]);t.useLayoutEffect(()=>{if(!A.current)return;const{current:G}=ee;G.toggleCss("ag-cell-value",!W),G.toggleCss("ag-cell-inline-editing",!!p&&!p.popup),G.toggleCss("ag-cell-popup-editing",!!p&&!!p.popup),G.toggleCss("ag-cell-not-inline-editing",!p||!!p.popup)});const ne=()=>{const{compDetails:G,value:V}=c;if(!G)return V?.toString?.()??V;if(G.componentFromFramework){const q=G.componentClass;return a.createElement(t.Suspense,{fallback:a.createElement(gs,{cellCtrl:e,parent:A})},te?a.createElement(q,{...G.params,key:R}):a.createElement(q,{...G.params,key:R,ref:f}))}},ie=()=>{const G=()=>c==null?null:W?a.createElement("span",{role:"presentation",id:`cell-${d}`,className:J,ref:U},ne()):ne(),V=q=>fs(q,le,A.current,e,_);return p!=null?p.popup?a.createElement(a.Fragment,null,G(),V(p)):V(p):G()},ue=()=>a.createElement("div",{ref:z,style:w,role:O,"col-id":u},W?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:Re},ie()):ie());return e.isCellSpanning()?a.createElement("div",{ref:me,className:"ag-spanned-cell-wrapper",role:"presentation"},ue()):ue()},Rs=t.memo(ys),vs=({rowCtrl:e,containerType:s})=>{const{context:r,gos:n,editSvc:o}=t.useContext(Z),u=t.useContext(_e)==="default",d=t.useRef(),l=t.useRef(e.getDomOrder()),c=e.isFullWidth(),h=e.rowNode.displayed,[p,P]=t.useState(()=>h?e.rowNode.getRowIndexString():null),[R,C]=t.useState(()=>e.rowId),[w,v]=t.useState(()=>e.businessKey),[g,i]=t.useState(()=>e.rowStyles),E=t.useRef(null),[B,S]=t.useState(()=>null),[y,_]=t.useState(),[D,L]=t.useState(()=>h?e.getInitialRowTop(s):void 0),[O,A]=t.useState(()=>h?e.getInitialTransform(s):void 0),m=t.useRef(null),f=t.useRef(),I=t.useRef(),$=t.useRef(!1),[b,K]=t.useState(0);t.useEffect(()=>{if($.current||!y||b>10)return;const z=m.current?.firstChild;z?(e.setupDetailRowAutoHeight(z),$.current=!0):K(me=>me+1)},[y,b]);const T=t.useRef();T.current||(T.current=new Ee(()=>m.current));const k=t.useRef(()=>{}),H=t.useCallback(z=>(k.current=z,()=>{k.current=()=>{}}),[]),M=Gt(H,()=>E.current,[]),U=u?M:B,F=t.useCallback(z=>{if(m.current=z,d.current=z?r.createBean(new ge):r.destroyBean(d.current),!z){e.unsetComp(s);return}if(!e.isAlive()||r.isDestroyed())return;const me={setTop:L,setTransform:A,toggleCss:(te,ne)=>T.current.toggleCss(te,ne),setDomOrder:te=>l.current=te,setRowIndex:P,setRowId:C,setRowBusinessKey:v,setUserStyles:i,setCellCtrls:(te,ne)=>{const ie=E.current,ue=Pe(ie,te,l.current);ue!==ie&&(E.current=ue,u?k.current():ve(ne,()=>S(ue)))},showFullWidth:te=>{I.current=te.params,_(te)},getFullWidthCellRenderer:()=>f.current,getFullWidthCellRendererParams:()=>I.current,refreshFullWidth:te=>{const ne=te();return I.current=ne,pe.current?(_(ie=>({...ie,params:ne})),!0):!f.current||!f.current.refresh?!1:f.current.refresh(ne)}};e.setComp(me,z,s,d.current)},[]);t.useLayoutEffect(()=>we(y,r,m.current,f),[y]);const W=t.useMemo(()=>{const z={top:D,transform:O};return Object.assign(z,g),z},[D,O,g]),J=c&&y?.componentFromFramework,le=!c&&U!=null,ee=t.useMemo(()=>!!(y?.componentFromFramework&&ye(y.componentClass)),[y]),pe=t.useRef(!1);t.useEffect(()=>{pe.current=ee&&!!y&&!!n.get("reactiveCustomComponents")},[ee,y]);const Re=()=>U?.map(z=>a.createElement(Rs,{cellCtrl:z,editingCell:o?.isEditing(z,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:z.instanceId})),fe=()=>{const z=y.componentClass;return ee?a.createElement(z,{...y.params}):a.createElement(z,{...y.params,ref:f})};return a.createElement("div",{ref:F,role:"row",style:W,"row-index":p,"row-id":R,"row-business-key":w},le?Re():J?fe():null)},He=t.memo(vs),ws=({name:e})=>{const{context:s,gos:r}=t.useContext(Z),n=t.useMemo(()=>at(e),[e]),o=t.useRef(null),u=t.useRef(null),d=t.useRef(null),l=t.useRef([]),c=t.useRef([]),[h,p]=t.useState(()=>[]),P=!!r.get("enableCellSpan")&&!!n.getSpannedRowCtrls,R=t.useRef([]),C=t.useRef([]),[w,v]=t.useState(()=>[]),g=t.useRef(!1),i=t.useRef(),E=t.useMemo(()=>oe("ag-viewport",ct(e)),[e]),B=t.useMemo(()=>oe(lt(e)),[e]),S=t.useMemo(()=>oe("ag-spanning-container",it(e)),[e]),y=n.type==="center"||P,_=y?o:u;he(" AG Row Container "+e+" ",_);const D=t.useCallback(()=>{const b=!y||o.current!=null,K=u.current!=null,T=!P||d.current!=null;return b&&K&&T},[]),L=t.useCallback(()=>o.current==null&&u.current==null&&d.current==null,[]),O=t.useCallback(()=>{if(L()&&(i.current=s.destroyBean(i.current)),!s.isDestroyed()&&D()){const b=k=>{const H=Pe(c.current,l.current,g.current);H!==c.current&&(c.current=H,ve(k,()=>p(H)))},K=k=>{const H=Pe(C.current,R.current,g.current);H!==C.current&&(C.current=H,ve(k,()=>v(H)))},T={setHorizontalScroll:k=>{o.current&&(o.current.scrollLeft=k)},setViewportHeight:k=>{o.current&&(o.current.style.height=k)},setRowCtrls:({rowCtrls:k,useFlushSync:H})=>{const M=!!H&&l.current.length>0&&k.length>0;l.current=k,b(M)},setSpannedRowCtrls:(k,H)=>{const M=!!H&&R.current.length>0&&k.length>0;R.current=k,K(M)},setDomOrder:k=>{g.current!=k&&(g.current=k,b(!1))},setContainerWidth:k=>{u.current&&(u.current.style.width=k)},setOffsetTop:k=>{u.current&&(u.current.style.transform=`translateY(${k})`)}};i.current=s.createBean(new ut(e)),i.current.setComp(T,u.current,d.current??void 0,o.current)}},[D,L]),A=t.useCallback(b=>{u.current=b,O()},[O]),m=t.useCallback(b=>{d.current=b,O()},[O]),f=t.useCallback(b=>{o.current=b,O()},[O]),I=()=>a.createElement("div",{className:B,ref:A,role:y?"presentation":"rowgroup"},h.map(b=>a.createElement(He,{rowCtrl:b,containerType:n.type,key:b.instanceId})));if(!y)return I();const $=()=>a.createElement("div",{className:S,ref:m,role:"presentation"},w.map(b=>a.createElement(He,{rowCtrl:b,containerType:n.type,key:b.instanceId})));return a.createElement("div",{className:E,ref:f,role:"rowgroup"},I(),P?$():null)},Ss=t.memo(ws),bs=()=>{const e=t.useContext(Z),{context:s,overlays:r}=e,[n,o]=t.useState(""),[u,d]=t.useState(0),[l,c]=t.useState(0),[h,p]=t.useState("0px"),[P,R]=t.useState("0px"),[C,w]=t.useState("100%"),[v,g]=t.useState("0px"),[i,E]=t.useState("0px"),[B,S]=t.useState("100%"),[y,_]=t.useState(!0),[D,L]=t.useState(!0),[O,A]=t.useState(null),[m,f]=t.useState(""),[I,$]=t.useState(null),[b,K]=t.useState("ag-layout-normal"),T=t.useRef();T.current||(T.current=new Ee(()=>k.current));const k=t.useRef(null),H=t.useRef(null),M=t.useRef(null),U=t.useRef(null),F=t.useRef(null),W=t.useRef(null),J=t.useRef(null),le=t.useRef([]),ee=t.useRef([]);he(" AG Grid Body ",k),he(" AG Pinned Top ",H),he(" AG Sticky Top ",M),he(" AG Middle ",W),he(" AG Pinned Bottom ",J);const pe=t.useCallback(N=>{if(k.current=N,!N||s.isDestroyed()){le.current=s.destroyBeans(le.current);for(const j of ee.current)j();ee.current=[];return}const X=(j,se)=>{j.appendChild(se),ee.current.push(()=>se.remove())},de=j=>{const se=s.createBean(new j);return le.current.push(se),se},Q=(j,se,Xe)=>{X(j,document.createComment(Xe)),X(j,de(se).getGui())};Q(N,Pt," AG Fake Horizontal Scroll ");const Ce=r?.getOverlayWrapperCompClass();Ce&&Q(N,Ce," AG Overlay Wrapper "),F.current&&Q(F.current,Et," AG Fake Vertical Scroll ");const Ze={setRowAnimationCssOnBodyViewport:o,setColumnCount:j=>{k.current&&bt(k.current,j)},setRowCount:j=>{k.current&&St(k.current,j)},setTopHeight:d,setBottomHeight:c,setStickyTopHeight:p,setStickyTopTop:R,setStickyTopWidth:w,setTopInvisible:_,setBottomInvisible:L,setColumnMovingCss:(j,se)=>T.current.toggleCss(j,se),updateLayoutClasses:K,setAlwaysVerticalScrollClass:A,setPinnedTopBottomOverflowY:f,setCellSelectableCss:(j,se)=>$(se?j:null),setBodyViewportWidth:j=>{W.current&&(W.current.style.width=j)},registerBodyViewportResizeListener:j=>{if(W.current){const se=Ve(e,W.current,j);ee.current.push(()=>se())}},setStickyBottomHeight:g,setStickyBottomBottom:E,setStickyBottomWidth:S,setGridRootRole:j=>N.setAttribute("role",j)},Be=s.createBean(new dt);le.current.push(Be),Be.setComp(Ze,N,W.current,H.current,J.current,M.current,U.current)},[]),Re=t.useMemo(()=>oe("ag-root","ag-unselectable",b),[b]),fe=t.useMemo(()=>oe("ag-body-viewport",n,b,O,I),[n,b,O,I]),z=t.useMemo(()=>oe("ag-body",b),[b]),me=t.useMemo(()=>oe("ag-floating-top",y?"ag-invisible":null,I),[I,y]),te=t.useMemo(()=>oe("ag-sticky-top",I),[I]),ne=t.useMemo(()=>oe("ag-sticky-bottom",v==="0px"?"ag-invisible":null,I),[I,v]),ie=t.useMemo(()=>oe("ag-floating-bottom",D?"ag-invisible":null,I),[I,D]),ue=t.useMemo(()=>({height:u,minHeight:u,overflowY:m}),[u,m]),G=t.useMemo(()=>({height:h,top:P,width:C}),[h,P,C]),V=t.useMemo(()=>({height:v,bottom:i,width:B}),[v,i,B]),q=t.useMemo(()=>({height:l,minHeight:l,overflowY:m}),[l,m]),Y=N=>a.createElement(Ss,{name:N,key:`${N}-container`}),x=({section:N,children:X,className:de,style:Q})=>a.createElement("div",{ref:N,className:de,role:"presentation",style:Q},X.map(Y));return a.createElement("div",{ref:pe,className:Re},a.createElement(is,null),x({section:H,className:me,style:ue,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:z,ref:F,role:"presentation"},x({section:W,className:fe,children:["left","center","right","fullWidth"]})),x({section:M,className:te,style:G,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),x({section:U,className:ne,style:V,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),x({section:J,className:ie,style:q,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},Ps=t.memo(bs),Es=(e,s)=>{const{children:r,eFocusableElement:n,onTabKeyDown:o,gridCtrl:u,forceFocusOutWhenTabGuardsAreEmpty:d,isEmpty:l}=e,{context:c}=t.useContext(Z),h=t.useRef(null),p=t.useRef(null),P=t.useRef(),R=i=>{const E=i==null?void 0:parseInt(i,10).toString();for(const B of[h,p])E===void 0?B.current?.removeAttribute("tabindex"):B.current?.setAttribute("tabindex",E)};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(i){P.current?.forceFocusOutOfContainer(i)}}));const C=t.useCallback(()=>{const i=h.current,E=p.current;if(!i&&!E||c.isDestroyed()){P.current=c.destroyBean(P.current);return}if(i&&E){const B={setTabIndex:R};P.current=c.createBean(new pt({comp:B,eTopGuard:i,eBottomGuard:E,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:d,focusInnerElement:S=>u.focusInnerElement(S),isEmpty:l}))}},[]),w=t.useCallback(i=>{h.current=i,C()},[C]),v=t.useCallback(i=>{p.current=i,C()},[C]),g=i=>{const E=i==="top"?Me.TAB_GUARD_TOP:Me.TAB_GUARD_BOTTOM;return a.createElement("div",{className:`${Me.TAB_GUARD} ${E}`,role:"presentation",ref:i==="top"?w:v})};return a.createElement(a.Fragment,null,g("top"),r,g("bottom"))},ks=t.forwardRef(Es),Ms=t.memo(ks),Fs=({context:e})=>{const[s,r]=t.useState(""),[n,o]=t.useState(""),[u,d]=t.useState(null),[l,c]=t.useState(null),[h,p]=t.useState(!1),[P,R]=t.useState(),C=t.useRef(),w=t.useRef(null),v=t.useRef(),[g,i]=t.useState(null),E=t.useRef(()=>{}),B=t.useRef(),S=t.useRef([]),y=t.useCallback(()=>{},[]);he(" AG Grid ",w);const _=t.useCallback(f=>{if(w.current=f,C.current=f?e.createBean(new mt):e.destroyBean(C.current),!f||e.isDestroyed())return;const I=C.current;E.current=I.focusInnerElement.bind(I);const $={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:b=>{if(!b&&B.current?.isDisplayed()){B.current.forceFocusOutOfContainer(b);return}v.current?.forceFocusOutOfContainer(b)},updateLayoutClasses:o,getFocusableContainers:()=>{const b=[],K=w.current?.querySelector(".ag-root");K&&b.push({getGui:()=>K});for(const T of S.current)T.isDisplayed()&&b.push(T);return b},setCursor:d,setUserSelect:c};I.setComp($,f,f),p(!0)},[]);t.useEffect(()=>{const f=C.current,I=w.current;if(!P||!f||!g||!I||e.isDestroyed())return;const $=[],{watermarkSelector:b,paginationSelector:K,sideBarSelector:T,statusBarSelector:k,gridHeaderDropZonesSelector:H}=f.getOptionalSelectors(),M=[];if(H){const F=e.createBean(new H.component),W=F.getGui();I.insertAdjacentElement("afterbegin",W),M.push(W),$.push(F)}if(T){const F=e.createBean(new T.component),W=F.getGui(),J=g.querySelector(".ag-tab-guard-bottom");J&&(J.insertAdjacentElement("beforebegin",W),M.push(W)),$.push(F),S.current.push(F)}const U=F=>{const W=e.createBean(new F),J=W.getGui();return I.insertAdjacentElement("beforeend",J),M.push(J),$.push(W),W};if(k&&U(k.component),K){const F=U(K.component);B.current=F,S.current.push(F)}return b&&U(b.component),()=>{e.destroyBeans($);for(const F of M)F.remove()}},[P,g,e]);const D=t.useMemo(()=>oe("ag-root-wrapper",s,n),[s,n]),L=t.useMemo(()=>oe("ag-root-wrapper-body","ag-focus-managed",n),[n]),O=t.useMemo(()=>({userSelect:l??"",WebkitUserSelect:l??"",cursor:u??""}),[l,u]),A=t.useCallback(f=>{v.current=f,R(f!==null)},[]),m=t.useCallback(()=>!C.current?.isFocusable(),[]);return a.createElement("div",{ref:_,className:D,style:O,role:"presentation"},a.createElement("div",{className:L,ref:i,role:"presentation"},h&&g&&!e.isDestroyed()&&a.createElement(Z.Provider,{value:e.getBeans()},a.createElement(Ms,{ref:A,eFocusableElement:g,onTabKeyDown:y,gridCtrl:C.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:m},a.createElement(Ps,null)))))},As=t.memo(Fs),Ds=class extends Ft{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(s=>!!s.eGui))}},qe={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},xs={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...qe},Qe=new Set(Object.keys(xs)),Gs=new Set(Object.keys(qe)),Ye=e=>{const s=t.useRef(),r=t.useRef(null),n=t.useRef(null),o=t.useRef([]),u=t.useRef([]),d=t.useRef(e),l=t.useRef(),c=t.useRef(),h=t.useRef(!1),[p,P]=t.useState(void 0),[,R]=t.useState(0),C=t.useCallback(i=>{if(r.current=i,!i){for(const m of o.current)m();o.current.length=0;return}const E=e.modules||[];n.current||(n.current=new Yt(()=>R(m=>m+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{n.current?.destroy(),n.current=null}));const B=Ct(e.gridOptions,e,Object.keys(e).filter(m=>!Qe.has(m))),S=()=>{if(h.current){const m=()=>l.current?.shouldQueueUpdates()?void 0:u.current.shift();let f=m();for(;f;)f(),f=m()}},y=new Ws(S);l.current=y;const _=new Ds,D={providedBeanInstances:{frameworkCompWrapper:new Is(n.current,B),renderStatus:_},modules:E,frameworkOverrides:y,setThemeOnGridDiv:!0},L=m=>{P(m),m.createBean(_),o.current.push(()=>{m.destroy()}),m.getBean("ctrlsSvc").whenReady({addDestroyFunc:f=>{o.current.push(f)}},()=>{if(m.isDestroyed())return;const f=s.current;f&&e.passGridApi?.(f)})},O=m=>{m.getBean("ctrlsSvc").whenReady({addDestroyFunc:f=>{o.current.push(f)}},()=>{for(const f of u.current)f();u.current.length=0,h.current=!0})},A=new gt;B.gridId??(B.gridId=c.current),s.current=A.create(i,B,L,O,D),o.current.push(()=>{s.current=void 0}),s.current&&(c.current=s.current.getGridId())},[]),w=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),v=t.useCallback(i=>{h.current&&!l.current?.shouldQueueUpdates()?i():u.current.push(i)},[]);t.useEffect(()=>{const i=Bs(d.current,e);d.current=e,v(()=>{s.current&&yt(i,s.current)})},[e]);const g=!a.useSyncExternalStore||Se(e,"renderingMode")==="legacy"?"legacy":"default";return a.createElement("div",{style:w,className:e.className,ref:C},a.createElement(_e.Provider,{value:g},p&&!p.isDestroyed()?a.createElement(As,{key:p.instanceId,context:p}):null,n.current?.getPortals()??null))};function Bs(e,s){const r={};for(const n of Object.keys(s)){if(Qe.has(n)){Gs.has(n)&&De(274,{prop:n});continue}const o=s[n];e[n]!==o&&(r[n]=o)}return r}var Is=class extends Mt{constructor(e,s){super(),this.parent=e,this.gridOptions=s}createWrapper(e,s){const r=this.gridOptions;if(Se(r,"reactiveCustomComponents")){const d=(l=>{switch(l){case"filter":return Se(r,"enableFilterHandlers")?Ut:Ht;case"floatingFilterComponent":return Se(r,"enableFilterHandlers")?Lt:_t;case"dateComponent":return Tt;case"dragAndDropImageComponent":return Nt;case"loadingOverlayComponent":return jt;case"noRowsOverlayComponent":return Kt;case"statusPanel":return Jt;case"toolPanel":return qt;case"menuItem":return $t;case"cellRenderer":return Wt;case"innerHeaderComponent":return zt}})(s.name);if(d)return new d(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Ge();break}const o=!s.cellRenderer&&s.name!=="toolPanel";return new $e(e,this.parent,s,o)}},Os=t.forwardRef((e,s)=>{const r=t.useContext(Z),{registry:n,context:o,gos:u,rowModel:d}=r,[l,c]=t.useState(()=>new ae),[h,p]=t.useState(()=>new ae),[P,R]=t.useState(),[C,w]=t.useState(),v=t.useRef(),g=t.useRef(null),i=t.useRef(),E=t.useMemo(()=>st(e.api.getGridId(),P?.rowModelType??"clientSide"),[e]),B=t.useMemo(()=>l.toString()+" ag-details-row",[l]),S=t.useMemo(()=>h.toString()+" ag-details-grid",[h]);s&&t.useImperativeHandle(s,()=>({refresh(){return v.current?.refresh()??!1}})),e.template&&De(230);const y=t.useCallback(D=>{if(g.current=D,!D||o.isDestroyed()){v.current=o.destroyBean(v.current),i.current?.();return}const L={toggleCss:(A,m)=>c(f=>f.setClass(A,m)),toggleDetailGridCss:(A,m)=>p(f=>f.setClass(A,m)),setDetailGrid:A=>R(A),setRowData:A=>w(A),getGui:()=>g.current},O=n.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(o.createBean(O),O.init(L,e),v.current=O,u.get("detailRowAutoHeight"))){const A=()=>{if(g.current==null)return;const m=g.current.clientHeight;m!=null&&m>0&&setTimeout(()=>{e.node.setRowHeight(m),(ht(u)||ft(u))&&d.onRowHeightChanged()},0)};i.current=Ve(r,D,A),A()}},[]),_=t.useCallback(D=>{v.current?.registerDetailWithMaster(D)},[]);return a.createElement("div",{className:B,ref:y},P&&a.createElement(Ye,{className:S,...P,modules:E,rowData:C,passGridApi:_}))}),Ws=class extends kt{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Oe,agGroupRowRenderer:Oe,agDetailCellRenderer:Os},this.wrapIncoming=(s,r)=>r==="ensureVisible"?Dt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return At()}},Hs=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const s of this.apiListeners)s(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(Ye,{...this.props,passGridApi:this.setGridApi})}};export{Hs as A};
