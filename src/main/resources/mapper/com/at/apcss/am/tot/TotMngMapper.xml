<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : asstMapper.xml                                   			-->
<!-- DESC : 집계 mapper                                             	-->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2024.10.08  	박승진       Initial Creation                            -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.am.tot.mapper.TotMngMapper">

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectCrtr  				-->
	<!-- DESC : 집계 기준 단건 조회.                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectCrtr" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO" resultType="com.at.apcss.am.tot.vo.TotCrtrVO">
		<![CDATA[
	    	SELECT /* com.at.apcss.am.tot.mapper.TotMngMapper.selectCrtr */
				C.APC_CD			AS APC_CD
				 , C.TOT_CRTR_TYPE	AS TOT_CRTR_TYPE
				 , C.CRTR_CD		AS CRTR_CD
				 , C.CRTR_VL		AS CRTR_VL
				 , C.CRTR_INDCT_NM	AS CRTR_INDCT_NM
	    	     , C.TOT_DTL_TYPE	AS TOT_DTL_TYPE
				 , C.INDCT_SEQ		AS INDCT_SEQ
				 , C.USE_YN			AS USE_YN
				 , C.DEL_YN			AS DEL_YN

				 , (
				SELECT MAX(X.DTL_SN)
				FROM TB_TOT_CRTR_DTL X
				WHERE X.APC_CD = C.APC_CD
				  AND X.TOT_CRTR_TYPE = C.TOT_CRTR_TYPE
				  AND X.CRTR_CD = C.CRTR_CD
			)	AS MAX_DTL_SN

			FROM TB_TOT_CRTR C

			WHERE C.APC_CD = #{apcCd}
			  AND C.TOT_CRTR_TYPE = #{totCrtrType}
			  AND C.CRTR_CD = #{crtrCd}
		]]>
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectCrtrList  				-->
	<!-- DESC : 집계 기준 목록 조회.                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectCrtrList" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO" resultType="com.at.apcss.am.tot.vo.TotCrtrVO">
		<![CDATA[
      		SELECT /* com.at.apcss.am.tot.mapper.TotMngMapper.selectCrtrList */

				  C.APC_CD				AS APC_CD
				, C.TOT_CRTR_TYPE	  	AS TOT_CRTR_TYPE
				, CT.CD_VL_NM			AS DSCD_CRTR_TYPE_NM
				, CT.INDCT_SEQ			AS CRTR_TYPE_SEQ
				, C.CRTR_CD			    AS CRTR_CD
				, C.CRTR_VL			    AS CRTR_VL
        		, C.TOT_DTL_TYPE    	AS TOT_DTL_TYPE
				, C.CRTR_INDCT_NM		AS CRTR_INDCT_NM
				, C.INDCT_SEQ			AS INDCT_SEQ
				, C.INDCT_SEQ			AS CRTR_SEQ
				, C.USE_YN				AS USE_YN
      			, CC.CD_CHR_VL			AS TOT_CRTR_CHR_VL

			  FROM TB_TOT_CRTR C

			  JOIN TB_COM_CD_DTL CT
			    ON CT.CD_ID = 'TOT_CRTR_TYPE'
			   AND CT.APC_CD = '0000'
			   AND CT.CD_VL = C.TOT_CRTR_TYPE
			   AND CT.DEL_YN = 'N'

			  JOIN TB_COM_CD_DTL CC
			    ON CC.CD_ID = 'TOT_CRTR_CD'
			   AND CC.APC_CD = '0000'
			   AND CC.CD_VL = C.CRTR_CD
			   AND CC.DEL_YN = 'N'

			 WHERE C.DEL_YN = 'N'
		]]>

		<if test='apcCd != null and apcCd != ""'>
			AND C.APC_CD = #{apcCd}
		</if>

		<if test='totCrtrType != null and totCrtrType != ""'>
			AND C.TOT_CRTR_TYPE = #{totCrtrType}
		</if>

		<if test='crtrCd != null and crtrCd != ""'>
			AND C.CRTR_CD = #{crtrCd}
		</if>

		<if test='crtrIndctNm != null and crtrIndctNm != ""'>
			AND C.CRTR_INDCT_NM LIKE '%' || #{crtrIndctNm} || '%'
		</if>

		<if test='useYn != null and useYn != ""'>
			AND C.USE_YN = #{useYn}
		</if>

		<![CDATA[
			 ORDER BY CRTR_TYPE_SEQ, CRTR_SEQ
		]]>
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectCrtrDtl  				-->
	<!-- DESC : 집계 기준 상세 단건 조회.                                             	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectCrtrDtl" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO" resultType="com.at.apcss.am.tot.vo.TotCrtrVO">
		<![CDATA[
			SELECT /* com.at.apcss.am.tot.mapper.TotMngMapper.selectCrtrDtl */
				CD.APC_CD				    AS APC_CD
				 , CD.TOT_CRTR_TYPE		AS TOT_CRTR_TYPE
				 , CD.CRTR_CD			  AS CRTR_CD
				 , CD.DTL_SN				AS DTL_SN
				 , CD.DTL_CD				AS DTL_CD
				 , CD.DTL_VL				AS DTL_VL
				 , CD.DTL_INDCT_NM	AS DTL_INDCT_NM
				 , CD.TOT_DTL_PRCS_CD AS TOT_DTL_PRCS_CD
				 , CD.USE_YN				AS USE_YN
				 , CD.DEL_YN				AS DEL_YN

			FROM TB_TOT_CRTR_DTL CD

			WHERE CD.APC_CD = #{apcCd}
			  AND CD.TOT_CRTR_TYPE = #{totCrtrType}
			  AND CD.CRTR_CD = #{crtrCd}
			  AND CD.DTL_SN = #{dtlSn}
		]]>
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.TotMngMapper.selectCrtrDtlList  				-->
	<!-- DESC : 집계 기준 상세 목록 조회.                                             	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectCrtrDtlList" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO" resultType="com.at.apcss.am.tot.vo.TotCrtrVO">
		<![CDATA[
			SELECT /* com.at.apcss.am.tot.mapper.TotMngMapper.selectCrtrDtlList */
				  C.APC_CD				  AS APC_CD
				, C.TOT_CRTR_TYPE	AS TOT_CRTR_TYPE
				, CT.CD_VL_NM			  AS TOT_CRTR_TYPE_NM
				, CT.INDCT_SEQ			AS CRTR_TYPE_SEQ
				, C.CRTR_CD			  AS CRTR_CD
				, C.CRTR_VL			  AS CRTR_VL
				, C.CRTR_INDCT_NM	AS CRTR_INDCT_NM
        		, C.TOT_DTL_TYPE   AS TOT_DTL_TYPE
				, C.INDCT_SEQ			AS CRTR_SEQ
				, C.USE_YN				  AS CRTR_USE_YN
      			, CC.CD_CHR_VL			AS TOT_CRTR_CHR_VL
				, CD.DTL_SN				  AS DTL_SN
				, CD.DTL_CD				  AS DTL_CD
				, CD.DTL_VL				  AS DTL_VL
				, CD.DTL_INDCT_NM		AS DTL_INDCT_NM
        		, CD.TOT_DTL_PRCS_CD  AS TOT_DTL_PRCS_CD
				, CD.USE_YN				  AS CRTR_DTL_USE_YN
				, CD.INDCT_SEQ			AS INDCT_SEQ
				, CD.INDCT_SEQ			AS CRTR_DTL_SEQ
				, CD.USE_YN				  AS USE_YN

			  FROM TB_TOT_CRTR C

			  JOIN TB_COM_CD_DTL CT
			    ON CT.CD_ID = 'TOT_CRTR_TYPE'
			   AND CT.APC_CD = '0000'
			   AND CT.CD_VL = C.TOT_CRTR_TYPE
			   AND CT.DEL_YN = 'N'

			  JOIN TB_COM_CD_DTL CC
			    ON CC.CD_ID = 'TOT_CRTR_CD'
			   AND CC.APC_CD = '0000'
			   AND CC.CD_VL = C.CRTR_CD
			   AND CC.DEL_YN = 'N'

			  JOIN TB_TOT_CRTR_DTL CD
			    ON CD.APC_CD = C.APC_CD
			   AND CD.TOT_CRTR_TYPE = C.TOT_CRTR_TYPE
			   AND CD.CRTR_CD = C.CRTR_CD
			   AND CD.DEL_YN = 'N'

			 WHERE C.DEL_YN = 'N'
		]]>

		<if test='apcCd != null and apcCd != ""'>
			AND C.APC_CD = #{apcCd}
		</if>

		<if test='totCrtrType != null and totCrtrType != ""'>
			AND C.TOT_CRTR_TYPE = #{totCrtrType}
		</if>

		<if test='crtrCd != null and crtrCd != ""'>
			AND C.CRTR_CD = #{crtrCd}
		</if>

		<if test='crtrUseYn != null and crtrUseYn != ""'>
			AND C.USE_YN = #{crtrUseYn}
		</if>

		<if test='crtrDtlUseYn != null and crtrDtlUseYn != ""'>
			AND CD.USE_YN = #{crtrDtlUseYn}
		</if>

		<![CDATA[
			 ORDER BY CRTR_TYPE_SEQ, CRTR_SEQ, CRTR_DTL_SEQ, DTL_SN
		]]>
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.TotMngMapper.insertCrtr  				-->
	<!-- DESC : 집계 기준 등록.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<insert id="insertCrtr" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO">
    	<![CDATA[
		INSERT /* com.at.apcss.am.tot.mapper.TotMngMapper.insertCrtr */
		INTO TB_TOT_CRTR (
						   APC_CD
						 , TOT_CRTR_TYPE
						 , CRTR_CD
						 , CRTR_VL
						 , CRTR_INDCT_NM
						 , TOT_DTL_TYPE
						 , INDCT_SEQ
						 , USE_YN
						 , DEL_YN
						 , SYS_FRST_INPT_DT
						 , SYS_FRST_INPT_USER_ID
						 , SYS_FRST_INPT_PRGRM_ID
						 , SYS_LAST_CHG_DT
						 , SYS_LAST_CHG_USER_ID
						 , SYS_LAST_CHG_PRGRM_ID
		) VALUES (

					 #{apcCd}
				 , #{totCrtrType}
				 , #{crtrCd}
				 , #{crtrVl}
				 , #{crtrIndctNm}
				 , #{totDtlType}
				 , #{indctSeq}
				 , #{useYn}
				 , 'N'
				 , SYSDATE
				 , #{sysFrstInptUserId}
				 , #{sysFrstInptPrgrmId}
				 , SYSDATE
				 , #{sysLastChgUserId}
				 , #{sysLastChgPrgrmId}
				 )
		]]>
    </insert>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.TotMngMapper.updateCrtr  	-->
	<!-- DESC : 집계 기준 수정.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<update id="updateCrtr" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO">
    	<![CDATA[
		UPDATE /* com.at.apcss.am.tot.mapper.TotMngMapper.updateCrtr */
			TB_TOT_CRTR
		SET
			CRTR_VL = #{crtrVl}
		  , CRTR_INDCT_NM = #{crtrIndctNm}
		  , TOT_DTL_TYPE = #{totDtlType}
		  , INDCT_SEQ = #{indctSeq}
		  , USE_YN = #{useYn}
		  , SYS_LAST_CHG_DT = SYSDATE
		  , SYS_LAST_CHG_USER_ID = #{sysLastChgUserId}
		  , SYS_LAST_CHG_PRGRM_ID = #{sysLastChgPrgrmId}
		WHERE APC_CD = #{apcCd}
		  AND TOT_CRTR_TYPE = #{totCrtrType}
		  AND CRTR_CD = #{crtrCd}
		]]>
    </update>

	<!-- ==========================================================================	-->
	<!-- com.at.apcss.am.tot.mapper.TotMngMapper.deleteCrtr				-->
	<!-- DESC : 집계기준정보 삭제.	                                       					-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.24  	박승진        		Initial Creation                        -->
	<!-- ==========================================================================	-->
	<delete id="deleteCrtr" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO">
		<![CDATA[
		DELETE /* com.at.apcss.am.tot.mapper.TotMngMapper.deleteCrtr */
		FROM TB_TOT_CRTR
		WHERE APC_CD = #{apcCd}
		  AND TOT_CRTR_TYPE = #{totCrtrType}
		  AND CRTR_CD = #{crtrCd}
		]]>
	</delete>


	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.TotMngMapper.insertCrtrDtl  				-->
	<!-- DESC : 집계 기준 상세 등록.	                                             	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<insert id="insertCrtrDtl" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO">
    	<![CDATA[
		INSERT /* com.at.apcss.am.tot.mapper.TotMngMapper.insertCrtrDtl */
		INTO TB_TOT_CRTR_DTL (
							   APC_CD
							 , TOT_CRTR_TYPE
							 , CRTR_CD
							 , DTL_SN
							 , DTL_CD
							 , DTL_VL
							 , DTL_INDCT_NM
							 , TOT_DTL_PRCS_CD
							 , INDCT_SEQ
							 , USE_YN
							 , DEL_YN
							 , SYS_FRST_INPT_DT
							 , SYS_FRST_INPT_USER_ID
							 , SYS_FRST_INPT_PRGRM_ID
							 , SYS_LAST_CHG_DT
							 , SYS_LAST_CHG_USER_ID
							 , SYS_LAST_CHG_PRGRM_ID


		) VALUES (
					 #{apcCd}
				 , #{totCrtrType}
				 , #{crtrCd}
				 , #{dtlSn}
				 , #{dtlCd}
				 , #{dtlVl}
				 , #{dtlIndctNm}
				 , #{totDtlPrcsCd}
				 , #{indctSeq}
				 , #{useYn}
				 , 'N'
				 , SYSDATE
				 , #{sysFrstInptUserId}
				 , #{sysFrstInptPrgrmId}
				 , SYSDATE
				 , #{sysLastChgUserId}
				 , #{sysLastChgPrgrmId}
				 )
		]]>
    </insert>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.TotMngMapper.updateCrtrDtl  				-->
	<!-- DESC : 집계 기준 상세 수정.	                                             	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<update id="updateCrtrDtl" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO">
    	<![CDATA[
		UPDATE /* com.at.apcss.am.tot.mapper.TotMngMapper.updateCrtrDtl */
			TB_TOT_CRTR_DTL
		SET
			DTL_CD = #{dtlCd}
		  , DTL_VL = #{dtlVl}
		  , DTL_INDCT_NM = #{dtlIndctNm}
		  , TOT_DTL_PRCS_CD = #{totDtlPrcsCd}
		  , INDCT_SEQ = #{indctSeq}
		  , USE_YN = #{useYn}
		  , SYS_LAST_CHG_DT = SYSDATE
		  , SYS_LAST_CHG_USER_ID = #{sysLastChgUserId}
		  , SYS_LAST_CHG_PRGRM_ID = #{sysLastChgPrgrmId}
		WHERE APC_CD = #{apcCd}
		  AND TOT_CRTR_TYPE = #{totCrtrType}
		  AND CRTR_CD = #{crtrCd}
		  AND DTL_SN = #{dtlSn}
		]]>
    </update>

	<!-- ==========================================================================	-->
	<!-- com.at.apcss.am.tot.mapper.TotMngMapper.deleteCrtrDtl						-->
	<!-- DESC : 집계기준 상세 삭제.	                                       			-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.24  	박승진        		Initial Creation                        -->
	<!-- ==========================================================================	-->
	<delete id="deleteCrtrDtl" parameterType="com.at.apcss.am.tot.vo.TotCrtrVO">
		<![CDATA[
		DELETE /* com.at.apcss.am.tot.mapper.TotMngMapper.deleteCrtrDtl */
		FROM TB_TOT_CRTR_DTL
		WHERE APC_CD = #{apcCd}
		  AND TOT_CRTR_TYPE = #{totCrtrType}
		  AND CRTR_CD = #{crtrCd}
		  AND DTL_SN = #{dtlSn}
		]]>
	</delete>



	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.inserttotMngInfo  	-->
	<!-- DESC : 집계 기준 등록.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <insert id="insertTotMngInfo" parameterType="com.at.apcss.am.tot.vo.TotMngVO">
    	<![CDATA[
	    	INSERT /* com.at.apcss.am.tot.mapper.insertTotMngInfo  */
	    	  INTO TB_TOT_CRTR (
				APC_CD
				, TOT_CRTR_TYPE
				, CRTR_CD
				, CRTR_VL
				, CRTR_INDCT_NM
				, TOT_DTL_TYPE
				, INDCT_SEQ
				, USE_YN
				, DEL_YN
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_USER_ID
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_USER_ID
				, SYS_LAST_CHG_PRGRM_ID



	    	  ) VALUES (

				#{apcCd}
				, #{totCrtrType}
				, #{crtrCd}
				, #{crtrVl}
				, #{crtrIndctNm}
				, #{totDtlType}
				, #{indctSeq}
				, #{useYn}
				, #{delYn}
				, SYSDATE
				, #{sysFrstInptUserId}
				, #{sysFrstInptPrgrmId}
				, SYSDATE
				, #{sysLastChgUserId}
				, #{sysLastChgPrgrmId}
	    	  )
		]]>
    </insert>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.inserttotMngDtlInfo  	-->
	<!-- DESC : 집계 상세 기준 등록.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <insert id="insertTotMngDtlInfo" parameterType="com.at.apcss.am.tot.vo.TotMngVO">
    	<![CDATA[
	    	INSERT /* com.at.apcss.am.tot.mapper.inserttotMngDtlInfo  */
	    	  INTO TB_TOT_CRTR_DTL (
				APC_CD
				, TOT_CRTR_TYPE
				, CRTR_CD
				, DTL_SN
				, DTL_CD
				, DTL_VL
				, DTL_INDCT_NM
				, TOT_DTL_PRCS_CD
				, INDCT_SEQ
				, USE_YN
				, DEL_YN
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_USER_ID
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_USER_ID
				, SYS_LAST_CHG_PRGRM_ID


	    	  ) VALUES (
				#{apcCd}
				, #{totCrtrType}
				, #{crtrCd}
				, (SELECT COALESCE(MAX(DTL_SN), 0) + 1 FROM TB_TOT_CRTR_DTL)
				, #{dtlCd}
				, #{dtlVl}
				, #{dtlIndctNm}
				, #{totDtlPrcsCd}
				, #{indctSeq}
				, #{useYn}
				, #{delYn}
				, SYSDATE
				, #{sysFrstInptUserId}
				, #{sysFrstInptPrgrmId}
				, SYSDATE
				, #{sysLastChgUserId}
				, #{sysLastChgPrgrmId}
	    	  )
		]]>
    </insert>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selecttotMngInfoList  	-->
	<!-- DESC : 집계 기준 조회.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectTotMngInfoList" parameterType="com.at.apcss.am.tot.vo.TotMngVO" resultType="com.at.apcss.am.tot.vo.TotMngVO">
    	<![CDATA[
	    	SELECT /* com.at.apcss.am.tot.mapper.selecttotMngInfoList */
				*
			  FROM TB_TOT_CRTR TC
			 WHERE TC.APC_CD = #{apcCd}
		]]>

	   	  <if test='totCrtrType != null and totCrtrType != ""'>
	   		AND TC.TOT_CRTR_TYPE = #{totCrtrType}
		  </if>
		  ORDER BY TC.INDCT_SEQ
    </select>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selecttotMngInfoList  	-->
	<!-- DESC : 집계 기준상세 조회.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectTotMngInfoDtlList" parameterType="com.at.apcss.am.tot.vo.TotMngVO" resultType="com.at.apcss.am.tot.vo.TotMngVO">
    	<![CDATA[
	    	SELECT /* com.at.apcss.am.tot.mapper.selectTotMngInfoDtlList */
				TCD.APC_CD
				, TCD.TOT_CRTR_TYPE
				, TCD.CRTR_CD
				, TCD.DTL_SN
				, TCD.DTL_CD
				, TCD.DTL_VL
				, TCD.DTL_INDCT_NM
				, TCD.TOT_DTL_PRCS_CD
				, TCD.INDCT_SEQ
				, TCD.USE_YN
				, TCD.DEL_YN
				, (SELECT FN_GET_COM_CD_VL_NM('TOT_TERM_KND',TCD.DTL_CD,'0000') FROM DUAL) AS DTL_NM
			  FROM TB_TOT_CRTR_DTL TCD
			 WHERE TCD.APC_CD = #{apcCd}
			]]>
			<if test='totCrtrType != null and totCrtrType != ""'>
	   			AND TCD.TOT_CRTR_TYPE = #{totCrtrType}
		  	</if>
		  	<if test='crtrCd != null and crtrCd != ""'>
	   			AND TCD.CRTR_CD = #{crtrCd}
		  	</if>


		  ORDER BY TCD.DTL_SN

    </select>


	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.updatetotMngInfo  	-->
	<!-- DESC : 집계 기준 수정.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <update id="updateTotMngInfo" parameterType="com.at.apcss.am.tot.vo.TotMngVO">
    	<![CDATA[
	    	UPDATE /* com.at.apcss.am.apc.mapper.ApcEvrmntStngMapper.updatetotMngInfo */
	    	  TB_TOT_CRTR SET
				CRTR_VL = #{crtrVl}
				, CRTR_INDCT_NM = #{crtrIndctNm}
				, TOT_DTL_TYPE = #{totDtlType}
				, INDCT_SEQ = #{indctSeq}
				, USE_YN = #{useYn}
				, SYS_LAST_CHG_DT = SYSDATE
				, SYS_LAST_CHG_USER_ID = #{sysLastChgUserId}
				, SYS_LAST_CHG_PRGRM_ID = #{sysLastChgPrgrmId}


			 WHERE APC_CD = #{apcCd}
			   AND TOT_CRTR_TYPE = #{totCrtrType}
			   AND CRTR_CD = #{crtrCd}
		]]>
    </update>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.updatetotMngDtlInfo  	-->
	<!-- DESC : 집계 상세기준 수정.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <update id="updateTotMngDtlInfo" parameterType="com.at.apcss.am.tot.vo.TotMngVO">
    	<![CDATA[
	    	UPDATE /* com.at.apcss.am.apc.mapper.ApcEvrmntStngMapper.updatetotMngDtlInfo */
	    	  TB_TOT_CRTR_DTL SET
				DTL_CD = #{dtlCd}
				, DTL_VL = #{dtlVl}
				, DTL_INDCT_NM = #{dtlIndctNm}
				, TOT_DTL_PRCS_CD = #{totDtlPrcsCd}
				, INDCT_SEQ = #{indctSeq}
				, USE_YN = #{useYn}
				, SYS_LAST_CHG_DT = SYSDATE
				, SYS_LAST_CHG_USER_ID = #{sysLastChgUserId}
				, SYS_LAST_CHG_PRGRM_ID = #{sysLastChgPrgrmId}



			 WHERE APC_CD = #{apcCd}
			   AND TOT_CRTR_TYPE = #{totCrtrType}
			   AND CRTR_CD = #{crtrCd}
			   AND DTL_SN = #{dtlSn}
		]]>
    </update>

    <!-- ==========================================================================	-->
	<!-- com.at.apcss.am.tot.mapper.totMngMapper.deletetotMngInfo				-->
	<!-- DESC : 집계기준정보 삭제.	                                       					-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.24  	박승진        		Initial Creation                        -->
	<!-- ==========================================================================	-->
    <delete id="deleteTotMngInfo" parameterType="com.at.apcss.am.tot.vo.TotMngVO">
		<![CDATA[
			DELETE /* com.at.apcss.am.tot.mapper.totMngMapper.deletetotMngInfo */
			  FROM TB_TOT_CRTR
			 WHERE APC_CD = #{apcCd}
			   AND TOT_CRTR_TYPE = #{totCrtrType}
			   AND CRTR_CD = #{crtrCd}
		]]>
	</delete>

	<!-- ==========================================================================	-->
	<!-- com.at.apcss.am.tot.mapper.totMngMapper.deletetotMngInfo				-->
	<!-- DESC : 집계기준상세정보 삭제.	                                       					-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.24  	박승진        		Initial Creation                        -->
	<!-- ==========================================================================	-->
    <delete id="deleteTotMngDtlInfo" parameterType="com.at.apcss.am.tot.vo.TotMngVO">
		<![CDATA[
			DELETE /* com.at.apcss.am.tot.mapper.totMngMapper.deletetotMngInfo */
			  FROM TB_TOT_CRTR_DTL
			 WHERE APC_CD = #{apcCd}
			   AND TOT_CRTR_TYPE = #{totCrtrType}
			   AND CRTR_CD = #{crtrCd}
			   AND DTL_SN = #{dtlSn}
		]]>
	</delete>


	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectSpmtPrfmncTotInfo  	-->
	<!-- DESC : 집계조회 - 출하.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectSpmtPrfmncTotInfo" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT
				* FROM TB_TOT_SPMT_PRFMNC A
				WHERE 1=1
					AND A.APC_CD = #{apcCd}
			]]>
			<if test='totYmdFrom != null and totYmdFrom != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdFrom}
    		</if>
    		<if test='totYmdTo != null and totYmdTo != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdTo}
    		</if>
			<if test='itemCd != null and itemCd != ""'>
	   			AND A.ITEM_CD = #{itemCd}
		  	</if>
		  	<if test='vrtyCd != null and vrtyCd != ""'>
	   			AND A.VRTY_CD = #{vrtyCd}
		  	</if>
    </select>


    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectGdsInvntrTotInfo  	-->
	<!-- DESC : 집계조회 - 상품.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectGdsInvntrTotInfo" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT
				* FROM TB_TOT_GDS_INVNTR A
				WHERE 1=1
					AND A.APC_CD = #{apcCd}
			]]>
			<if test='totYmdFrom != null and totYmdFrom != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdFrom}
    		</if>
    		<if test='totYmdTo != null and totYmdTo != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdTo}
    		</if>
			<if test='itemCd != null and itemCd != ""'>
	   			AND A.ITEM_CD = #{itemCd}
		  	</if>
		  	<if test='vrtyCd != null and vrtyCd != ""'>
	   			AND A.VRTY_CD = #{vrtyCd}
		  	</if>
    </select>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectPckgPrfmncTotInfo  	-->
	<!-- DESC : 집계조회 - 포장.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectPckgPrfmncTotInfo" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT
				* FROM TB_TOT_PCKG_PRFMNC A
				WHERE 1=1
					AND A.APC_CD = #{apcCd}
			]]>
			<if test='totYmdFrom != null and totYmdFrom != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdFrom}
    		</if>
    		<if test='totYmdTo != null and totYmdTo != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdTo}
    		</if>
			<if test='itemCd != null and itemCd != ""'>
	   			AND A.ITEM_CD = #{itemCd}
		  	</if>
		  	<if test='vrtyCd != null and vrtyCd != ""'>
	   			AND A.VRTY_CD = #{vrtyCd}
		  	</if>
    </select>

     <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectRawMtrInvntrTotInfo  	-->
	<!-- DESC : 집계조회 - 원물재고.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectRawMtrInvntrTotInfo" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT
				* FROM TB_TOT_RAW_MTR_INVNTR A
				WHERE 1=1
					AND A.APC_CD = #{apcCd}
			]]>
			<if test='totYmdFrom != null and totYmdFrom != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdFrom}
    		</if>
    		<if test='totYmdTo != null and totYmdTo != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdTo}
    		</if>
			<if test='itemCd != null and itemCd != ""'>
	   			AND A.ITEM_CD = #{itemCd}
		  	</if>
		  	<if test='vrtyCd != null and vrtyCd != ""'>
	   			AND A.VRTY_CD = #{vrtyCd}
		  	</if>
    </select>

     <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectRawMtrWrhsTotInfo  	-->
	<!-- DESC : 집계조회 - 원물입고.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectRawMtrWrhsTotInfo" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT
				* FROM TB_TOT_RAW_MTR_WRHS A
				WHERE 1=1
					AND A.APC_CD = #{apcCd}
			]]>
			<if test='totYmdFrom != null and totYmdFrom != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdFrom}
    		</if>
    		<if test='totYmdTo != null and totYmdTo != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdTo}
    		</if>
			<if test='itemCd != null and itemCd != ""'>
	   			AND A.ITEM_CD = #{itemCd}
		  	</if>
		  	<if test='vrtyCd != null and vrtyCd != ""'>
	   			AND A.VRTY_CD = #{vrtyCd}
		  	</if>
    </select>

     <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectSortInvntrTotInfo  	-->
	<!-- DESC : 집계조회 - 선별재고.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectSortInvntrTotInfo" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT
				* FROM TB_TOT_SORT_INVNTR A
				WHERE 1=1
					AND A.APC_CD = #{apcCd}
			]]>
			<if test='totYmdFrom != null and totYmdFrom != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdFrom}
    		</if>
    		<if test='totYmdTo != null and totYmdTo != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdTo}
    		</if>
			<if test='itemCd != null and itemCd != ""'>
	   			AND A.ITEM_CD = #{itemCd}
		  	</if>
		  	<if test='vrtyCd != null and vrtyCd != ""'>
	   			AND A.VRTY_CD = #{vrtyCd}
		  	</if>
    </select>

     <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.tot.mapper.totMngMapper.selectSortPrfmncTotInfo  	-->
	<!-- DESC : 집계조회 - 선별실적.	                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.08  	박승진        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectSortPrfmncTotInfo" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT
				* FROM TB_TOT_SORT_PRFMNC A
				WHERE 1=1
					AND A.APC_CD = #{apcCd}
			]]>
			<if test='totYmdFrom != null and totYmdFrom != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdFrom}
    		</if>
    		<if test='totYmdTo != null and totYmdTo != ""'>
				AND A.TOT_YMD <![CDATA[>=]]> #{totYmdTo}
    		</if>
			<if test='itemCd != null and itemCd != ""'>
	   			AND A.ITEM_CD = #{itemCd}
		  	</if>
		  	<if test='vrtyCd != null and vrtyCd != ""'>
	   			AND A.VRTY_CD = #{vrtyCd}
		  	</if>
    </select>






</mapper>
