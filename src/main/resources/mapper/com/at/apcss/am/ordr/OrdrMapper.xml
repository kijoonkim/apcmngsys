<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : OrdrMapper.xml                                   			-->
<!-- DESC : 발주정보조회 mapper                   				                 	-->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2023.08.24  	하민우        	Initial Creation                            -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.am.ordr.mapper.OrdrMapper">

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.selectOrdrList				-->
	<!-- DESC : 발주정보 목록 조회.	                         	             	 	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.24  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectOrdrList" parameterType="com.at.apcss.am.ordr.vo.OrdrVO" resultType="com.at.apcss.am.ordr.vo.OrdrVO">
    	<![CDATA[
    		SELECT /* com.at.apcss.am.ordr.mapper.OrdrMapper.selectOrdrList */
    	]]>
    	<!-- Start 페이징 -->
    	<if test='pagingYn != null and pagingYn.equals("Y")'>
    			  ROWNUM AS ROW_SEQ
    			, COUNT(*) OVER() AS TOTAL_RECORD_COUNT
    			, 
    	</if>
    	<!-- End 페이징 -->
    	<![CDATA[
				  pt0.*
	    		, (SELECT FN_GET_ITEM_NM(pt0.ITEM_CD, pt0.APC_CD) FROM DUAL)						AS ITEM_NM
	    		, (SELECT FN_GET_VRTY_NM(pt0.ITEM_CD, pt0.VRTY_CD, pt0.APC_CD) FROM DUAL)			AS VRTY_NM
	    		, (SELECT FN_GET_SPCFCT_NM(pt0.ITEM_CD, pt0.SPCFCT_CD, pt0.APC_CD) FROM DUAL)		AS SPCFCT_NM
	    		, (SELECT FN_GET_SPMT_PCKG_UNIT_NM(pt0.SPMT_PCKG_UNIT_CD, pt0.APC_CD) FROM DUAL)	AS SPMT_PCKG_UNIT_NM
	    		, (SELECT FN_GET_COM_CD_VL_NM('OUTORDR_TYPE', pt0.OUTORDR_TYPE) FROM DUAL)          AS OUTORDR_TYPE_NM
	    		, (SELECT FN_GET_APC_NM(pt0.APC_CD) FROM DUAL)          							AS RCPT_CFMTN_APC_NM
	    		, (SELECT FN_GET_COM_CD_VL_NM('LGSZ_MRKT_CD', pt0.LGSZ_MRKT_CD) FROM DUAL)          AS LGSZ_MRKT_NM
    		 FROM (
	    	SELECT 
	    		   OI.APC_CD				AS APC_CD
    		  	 , OI.APC_SE_CD				AS APC_SE_CD
    		  	 , OI.RCPT_CFMTN_YMD		AS RCPT_CFMTN_YMD
    		  	 , OI.RCPTN_SE_CD           AS RCPTN_SE_CD
    		  	 , CASE OI.RCPTN_SE_CD
    		  	 	WHEN '10' THEN '21'
    		  	 	WHEN '20' THEN '41'
    		  	 	WHEN '30' THEN '11'
    		  	 	WHEN '40' THEN '31'
    		  	 	WHEN '41' THEN '32'
    		  	 	ELSE NULL
    		  	   END						AS LGSZ_MRKT_CD
    		  	 , OI.OUTORDR_TYPE			AS OUTORDR_TYPE
			  	 , OI.OUTORDRNO				AS OUTORDRNO
    		  	 , OI.APC_CNPT_NM			AS APC_CNPT_NM
    		  	 , OI.APC_CNPT_CD			AS APC_CNPT_CD
    		  	 , OI.WRHS_YMD				AS WRHS_YMD
    		  	 , OI.OUTORDR_YMD			AS OUTORDR_YMD
    		  	 , OI.ORDR_PRSN				AS ORDR_PRSN
    		  	 , OI.SPLY_PRSN				AS SPLY_PRSN
    		  	 , OI.SPMT_PCKG_UNIT_CD		AS SPMT_PCKG_UNIT_CD
    		  	 , OI.DLDTN					AS DLDTN
    		  	 , OI.ITEM_CD				AS ITEM_CD
    		  	 , OI.VRTY_CD				AS VRTY_CD
    		  	 , OI.SPCFCT_CD				AS SPCFCT_CD
    		  	 , OI.BX_GDS_QNTT			AS BX_GDS_QNTT
    		  	 , OI.OUTORDR_QNTT			AS OUTORDR_QNTT
    	   	  	 , OI.PIECE_QNTT			AS PIECE_QNTT
    	 	  	 , OI.UNIT_CD				AS UNIT_CD
    		  	 , OI.BX_UNTPRC				AS BX_UNTPRC
    		  	 , OI.OUTORDR_UNTPRC		AS OUTORDR_UNTPRC
    		  	 , OI.OUTORDR_UNIT_CD		AS OUTORDR_UNIT_CD
    		  	 , OI.LOT					AS LOT
    		  	 , OI.TX_AMT				AS TX_AMT
    		  	 , OI.OUTORDR_AMT			AS OUTORDR_AMT
    		  	 , OI.WRHS_TYPE				AS WRHS_TYPE
    		  	 , OI.DOC_NO				AS DOC_NO
    		  	 , OI.DOCK_INFO				AS DOCK_INFO
    		  	 , OI.CNTR_SE				AS CNTR_SE
    		  	 , OI.BUYER_NM				AS BUYER_NM
    		  	 , OI.CNTR_RCVD_WRHS_YMD	AS CNTR_RCVD_WRHS_YMD
    		  	 , OI.CNTR_NM				AS CNTR_NM
    		  	 , OI.DLVGDS_SE_CD			AS DLVGDS_SE_CD
    		  	 , OI.ETC					AS ETC
    		  	 , OI.RCPT_CFMTN_APC_CD		AS RCPT_CFMTN_APC_CD
    		  	 , (
    		  	 	SELECT MIN(X.SPMT_CMNDNO)
    		  	 	  FROM TB_SPMT_CMND X
    		  	 	 WHERE X.APC_CD = OI.APC_CD
    		  	 	   AND X.OUTORDRNO = OI.OUTORDRNO
    		  	 	   AND X.DEL_YN = 'N'
    		  	 )	AS SPMT_CMNDNO
    		  	 , (
    		  	 	SELECT MIN(PC.SPMT_YMD)
    		  	 	  FROM
    		  	 	  	  TB_SPMT_PRFMNC_DTL PD
    		  	 	  	, TB_SPMT_PRFMNC_COM PC 
			     	 WHERE PD.APC_CD = PC.APC_CD
			     	   AND PD.SPMTNO = PC.SPMTNO
			           AND PD.DEL_YN = 'N'
			           AND PC.DEL_YN = 'N'
			           AND PD.APC_CD = OI.APC_CD
			           AND PD.OUTORDRNO = OI.OUTORDRNO
    		  	 )	AS SPMT_YMD
	             , (SELECT GDS_GRD
                      FROM TB_SPMT_PCKG_UNIT X
                     WHERE X.APC_CD = OI.APC_CD
                       AND X.SPMT_PCKG_UNIT_CD = OI.SPMT_PCKG_UNIT_CD
                       AND X.DEL_YN = 'N'
                   ) 						AS GDS_GRD
	             , (SELECT WGHT
                      FROM TB_APC_SPCFCT_CRTR X
                     WHERE X.APC_CD = OI.APC_CD
		               AND X.ITEM_CD = OI.ITEM_CD
		               AND X.SPCFCT_CD = OI.SPCFCT_CD
		               AND X.DEL_YN = 'N'
                   ) 						AS WGHT
	             , (SELECT SUM(INVNTR_QNTT)
	                  FROM TB_GDS_INVNTR X
	                 WHERE X.APC_CD = OI.APC_CD
	                   AND X.GDS_CD = OI.GDS_CD
	                   AND X.DEL_YN = 'N'
	               ) 						AS INVNTR_QNTT
	             , (SELECT SUM(INVNTR_WGHT)
	                  FROM TB_GDS_INVNTR X
	                 WHERE X.APC_CD = OI.APC_CD
	                   AND X.GDS_CD = OI.GDS_CD
	                   AND X.DEL_YN = 'N'
	               ) 						AS INVNTR_WGHT
	             , (SELECT SUM(SPMT_QNTT)
	                  FROM TB_SPMT_PRFMNC_DTL X
	                 WHERE X.APC_CD = OI.APC_CD
	                   AND X.OUTORDRNO = OI.OUTORDRNO
	                   AND X.DEL_YN = 'N'
	               ) 						AS SPMT_QNTT
	             , (SELECT SUM(SPMT_WGHT)
	                  FROM TB_SPMT_PRFMNC_DTL X
	                 WHERE X.APC_CD = OI.APC_CD
	                   AND X.OUTORDRNO = OI.OUTORDRNO
	                   AND X.DEL_YN = 'N'
	               ) 						AS SPMT_WGHT
                 , (SELECT SUM(CMND_QNTT)
                      FROM TB_SPMT_CMND X
                     WHERE X.APC_CD = OI.APC_CD
                       AND X.OUTORDRNO = OI.OUTORDRNO
                       AND X.DEL_YN = 'N'
                   ) 						AS CMND_QNTT
                 , (SELECT SUM(CMND_WGHT)
                      FROM TB_SPMT_CMND X
                     WHERE X.APC_CD = OI.APC_CD
                       AND X.OUTORDRNO = OI.OUTORDRNO
                       AND X.DEL_YN = 'N'
                   ) 						AS CMND_WGHT
    		  	 , OI.DEL_YN				AS DEL_YN
    		  	 , OI.ORGN_GDS_CD			AS ORGN_GDS_CD
    		  	 , OI.ORGN_GDS_NM			AS ORGN_GDS_NM
			  FROM TB_OUTORDR_INFO OI
			 WHERE OI.DEL_YN = 'N'
		]]>
		<if test='rcptYn != null and rcptYn == "Y"'>
			   AND ((
						(OI.APC_SE_CD = '1' AND OI.APC_CD = '0000' AND OI.RCPT_CFMTN_APC_CD = #{apcCd})
	         			OR
	         			(OI.APC_SE_CD = '2' AND OI.APC_CD = #{apcCd}))
      				AND OI.RCPT_CFMTN_YMD IS NOT NULL)
		</if>
		<if test='rcptYn != null and rcptYn == "N"'>
			   AND ((
						(OI.APC_SE_CD = '1' AND OI.APC_CD = '0000')
         				OR
         				(OI.APC_SE_CD = '2' AND OI.APC_CD = #{apcCd}))
      				AND OI.RCPT_CFMTN_YMD IS NULL)
		</if>
		<if test='rcptYn == null or rcptYn == ""'>
			   AND (((
						(OI.APC_SE_CD = '1' AND OI.APC_CD = '0000')
         				OR
         				(OI.APC_SE_CD = '2' AND OI.APC_CD = #{apcCd}))
      				AND OI.RCPT_CFMTN_YMD IS NULL)
      				OR
      				((
						(OI.APC_SE_CD = '1' AND OI.APC_CD = '0000' AND OI.RCPT_CFMTN_APC_CD = #{apcCd})
	         			OR
	         			(OI.APC_SE_CD = '2' AND OI.APC_CD = #{apcCd}))
      				AND OI.RCPT_CFMTN_YMD IS NOT NULL))
		</if>
		<if test='outordrYmdFrom != null and outordrYmdFrom != ""'>
		   	   AND OI.OUTORDR_YMD <![CDATA[>=]]> #{outordrYmdFrom}
		</if>
		<if test='outordrYmdTo != null and outordrYmdTo != ""'>
		       AND OI.OUTORDR_YMD <![CDATA[<=]]> #{outordrYmdTo}
		</if>
		<if test='outordrType != null and outordrType != ""'>
		   	   AND OI.OUTORDR_TYPE = #{outordrType}
		</if>
		
		<if test='rcptnSeCd != null and rcptnSeCd != ""'>
		   	   AND OI.RCPTN_SE_CD = #{rcptnSeCd}
		</if>
		
		<if test='apcCnptNm != null and apcCnptNm != ""'>
		       AND OI.APC_CNPT_NM LIKE '%' ||  #{apcCnptNm} || '%'
		</if>
		<if test='itemCd != null and itemCd != ""'>
		       AND OI.ITEM_CD = #{itemCd}
		</if>
		<if test='vrtyCd != null and vrtyCd != ""'>
		       AND OI.VRTY_CD in (SELECT COL1  FROM TABLE(FN_SYS_SPLIT_STRING(#{vrtyCd})))
		</if>
		<if test='wrhsYmd != null and wrhsYmd != ""'>
		   	   AND OI.WRHS_YMD = #{wrhsYmd}
		</if>
		<if test='spmtPckgUnitNm != null and spmtPckgUnitNm != ""'>
		   	   AND (SELECT FN_GET_SPMT_PCKG_UNIT_NM(OI.SPMT_PCKG_UNIT_CD, OI.APC_CD) FROM DUAL) LIKE '%' ||  #{spmtPckgUnitNm} || '%'
		</if>
    	<![CDATA[
		  ORDER BY OI.RCPT_CFMTN_YMD DESC NULLS LAST, OI.WRHS_YMD
    		  ) pt0
		]]>
		<!-- Start 페이징 -->
    	<if test='pagingYn != null and pagingYn.equals("Y")'>
			OFFSET (#{currentPageNo} - 1) * #{recordCountPerPage} ROWS
			FETCH FIRST #{recordCountPerPage} ROWS ONLY
    	</if>
    	<!-- End 페이징 -->
    </select>


    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.selectOrdrHandwritingList	-->
	<!-- DESC : 발주정보 수기등록 목록 조회.	                         	        -->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.10.04  	김호        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectOrdrHandwritingList" parameterType="com.at.apcss.am.ordr.vo.OrdrVO" resultType="com.at.apcss.am.ordr.vo.OrdrVO">
    	<![CDATA[
    		SELECT
    			  pt0.*
	    		, (SELECT FN_GET_ITEM_NM(pt0.ITEM_CD, pt0.APC_CD) FROM DUAL)						AS ITEM_NM
	    		, (SELECT FN_GET_VRTY_NM(pt0.ITEM_CD, pt0.VRTY_CD, pt0.APC_CD) FROM DUAL)			AS VRTY_NM
	    		, (SELECT FN_GET_SPCFCT_NM(pt0.ITEM_CD, pt0.SPCFCT_CD, pt0.APC_CD) FROM DUAL)		AS SPCFCT_NM
	    		, (SELECT FN_GET_COM_CD_VL_NM('OUTORDR_TYPE', pt0.OUTORDR_TYPE) FROM DUAL)          AS OUTORDR_TYPE_NM
	    		, (SELECT FN_GET_SPMT_PCKG_UNIT_NM(pt0.SPMT_PCKG_UNIT_CD, pt0.APC_CD) FROM DUAL)	AS SPMT_PCKG_UNIT_NM
    		 FROM (
		    		SELECT /* com.at.apcss.am.ordr.mapper.OrdrMapper.selectOrdrHandwritingList */
					       OI.APC_CD                AS APC_CD
					     , OI.APC_SE_CD             AS APC_SE_CD
					     , OI.OUTORDRNO             AS OUTORDRNO
					     , OI.RCPTN_SE_CD           AS RCPTN_SE_CD
					     , OI.OUTORDR_TYPE          AS OUTORDR_TYPE
					     , OI.WRHS_TYPE             AS WRHS_TYPE
					     , OI.OUTORDR_YMD           AS OUTORDR_YMD
					     , OI.ORDR_PRSN          	AS ORDR_PRSN
					     , OI.ORDR_PRSN_CD       	AS ORDR_PRSN_CD
					     , OI.DOCK_INFO             AS DOCK_INFO
					     , OI.SPLY_PRSN             AS SPLY_PRSN
					     , OI.ITEM_CD               AS ITEM_CD
					     , OI.VRTY_CD               AS VRTY_CD
					     , OI.SPCFCT_CD             AS SPCFCT_CD
					     , OI.TPND                  AS TPND
					     , OI.TPNB                  AS TPNB
					     , OI.DIAMONDLINE           AS DIAMONDLINE
					     , OI.DLDTN                 AS DLDTN
					     , OI.BX_GDS_QNTT           AS BX_GDS_QNTT
					     , OI.OUTORDR_QNTT          AS OUTORDR_QNTT
					     , OI.PIECE_QNTT            AS PIECE_QNTT
					     , OI.UNIT_CD               AS UNIT_CD
					     , OI.BX_UNTPRC             AS BX_UNTPRC
					     , OI.OUTORDR_UNTPRC        AS OUTORDR_UNTPRC
					     , OI.OUTORDR_UNIT_CD       AS OUTORDR_UNIT_CD
					     , OI.LOT                   AS LOT
					     , OI.TX_AMT                AS TX_AMT
					     , OI.OUTORDR_AMT           AS OUTORDR_AMT
					     , OI.DLDTN_CD              AS DLDTN_CD
					     , OI.WRHS_YMD              AS WRHS_YMD
					     , OI.DLVGDS_NM             AS DLVGDS_NM
					     , OI.DLVGDS_CD             AS DLVGDS_CD
					     , OI.APC_CNPT_NM           AS APC_CNPT_NM
					     , OI.APC_CNPT_CD           AS APC_CNPT_CD
					     , OI.CNTR_SE               AS CNTR_SE
					     , OI.CNTR_RCVD_WRHS_YMD    AS CNTR_RCVD_WRHS_YMD
					     , OI.CNTR_CD               AS CNTR_CD
					     , OI.CNTR_NM               AS CNTR_NM
					     , OI.DLVGDS_SE_CD          AS DLVGDS_SE_CD
					     , OI.ETC                   AS ETC
					     , OI.BUYER_NM              AS BUYER_NM
					     , OI.OUTORDR_WGHT          AS OUTORDR_WGHT
					     , OI.PIECE_WGHT            AS PIECE_WGHT
					     , OI.UNIT_WGHT             AS UNIT_WGHT
					     , OI.SPMT_PCKG_UNIT_CD     AS SPMT_PCKG_UNIT_CD
					     , OI.GRD_CD                AS GRD_CD
					     , OI.DEL_YN                AS DEL_YN
					     , TO_CHAR(OI.SYS_FRST_INPT_DT, 'YYYY-MM-DD')      AS REG_YMD
		     			, (SELECT USER_NM FROM TB_COM_USER X WHERE X.USER_ID = OI.SYS_FRST_INPT_USER_ID) AS REG_USER_NM
					  FROM TB_OUTORDR_INFO OI
					 WHERE OI.DEL_YN 		= 'N'
					   AND OI.RCPTN_SE_CD 	= '99'
					   AND OI.APC_CD		= #{apcCd}
					   AND OI.OUTORDR_YMD  >= #{outordrYmd}
		]]>


    	<if test='outordrType != null and outordrType != ""'>
    		AND OI.OUTORDR_TYPE = #{outordrType}
    	</if>
    	<if test='outordrType == null or outordrType == ""'>

    	</if>

    	<![CDATA[
    	) pt0
		]]>

    </select>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.insertOrdr					-->
	<!-- DESC : 발주정보 등록.	                         	             	 			-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.24  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <insert id="insertOrdr" parameterType="com.at.apcss.am.ordr.vo.OrdrVO">
    	<![CDATA[
    	INSERT INTO TB_OUTORDR_INFO
    		(
    			APC_CD
    	      , APC_SE_CD
    	      , OUTORDRNO
    	      , RCPTN_SE_CD
    	      , RCPTNNO
    	      , RCPT_CFMTN_APC_CD
    	      , RCPT_CFMTN_YMD
    	      , SPMT_CMNDNO
    	      , DOC_NO
    	      , CNPT_ORDRNO
    	      , OUTORDR_TYPE
    	      , WRHS_TYPE
    	      , OUTORDR_YMD
    	      , ORDR_PRSN
    	      , ORDR_PRSN_CD
    	      , DOCK_INFO
    	      , SPLY_PRSN
    	      , GDS_CD
    	      , ITEM_CD
    	      , VRTY_CD
    	      , SPCFCT_CD
    	      , TPND
    	      , TPNB
    	      , DIAMONDLINE
    	      , DLDTN
    	      , BX_GDS_QNTT
    	      , OUTORDR_QNTT
    	      , PIECE_QNTT
    	      , UNIT_CD
    	      , BX_UNTPRC
    	      , OUTORDR_UNTPRC
    	      , OUTORDR_UNIT_CD
    	      , LOT
    	      , TX_AMT
    	      , OUTORDR_AMT
    	      , DLDTN_CD
    	      , WRHS_YMD
    	      , DLVGDS_NM
    	      , DLVGDS_CD
    	      , APC_CNPT_NM
    	      , APC_CNPT_CD
    	      , CNTR_SE
    	      , CNTR_RCVD_WRHS_YMD
    	      , CNTR_CD
    	      , CNTR_NM
    	      , DLVGDS_SE_CD
    	      , ETC
    	      , BUYER_NM
    	      , OUTORDR_WGHT
    	      , PIECE_WGHT
    	      , UNIT_WGHT
    	      , SPMT_PCKG_UNIT_CD
    	      , GRD_CD
    		  , SYS_FRST_INPT_DT
    		  , SYS_FRST_INPT_USER_ID
    		  , SYS_FRST_INPT_PRGRM_ID
    		  , SYS_LAST_CHG_DT
    		  , SYS_LAST_CHG_USER_ID
    		  , SYS_LAST_CHG_PRGRM_ID
    		)
   		VALUES
   			(
		 	    #{apcCd}
			  , #{apcSeCd}
			  , #{outordrno}
			  , #{rcptnSeCd}
    		  , #{rcptnno}
    		  , #{rcptCfmtnApcCd}
    		  , #{rcptCfmtnYmd}
    		  , #{spmtCmndno}
    		  , #{docNo}
    		  , #{cnptOrdrno}
    		  , #{outordrType}
    		  , #{wrhsType}
    		  , #{outordrYmd}
    		  , #{ordrPrsn}
    		  , #{ordrPrsnCd}
    		  , #{dockInfo}
    		  , #{splyPrsn}
    		  , #{gdsCd}
    		  , #{itemCd}
    		  , #{vrtyCd}
    		  , #{spcfctCd}
    		  , #{tpnd}
    		  , #{tpnb}
    		  , #{diamondline}
    		  , #{dldtn}
    		  , #{bxGdsQntt}
    		  , #{outordrQntt}
    		  , #{pieceQntt}
    		  , #{unitCd}
    		  , #{bxUntprc}
    		  , #{outordrUntprc}
    		  , #{outordrUnitCd}
    		  , #{lot}
    		  , #{txAmt}
    		  , #{outordrAmt}
    		  , #{dldtnCd}
    		  , #{wrhsYmd}
    		  , #{dlvgdsNm}
    		  , #{dlvgdsCd}
    		  , #{apcCnptNm}
    		  , #{apcCnptCd}
    		  , #{cntrSe}
    		  , #{cntrRcvdWrhsYmd}
    		  , #{cntrCd}
    		  , #{cntrNm}
    		  , #{dlvgdsSeCd}
    		  , #{etc}
    		  , #{buyerNm}
    	      , #{outordrWght}
    	      , #{pieceWght}
    	      , #{unitWght}
    	      , #{spmtPckgUnitCd}
    	      , #{grdCd}
    		  , SYSDATE
    		  , #{sysFrstInptUserId}
    		  , #{sysFrstInptPrgrmId}
    		  , SYSDATE
    		  , #{sysLastChgUserId}
    		  , #{sysLastChgPrgrmId}
   			)
    	]]>
    </insert>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.updateOrdr					-->
	<!-- DESC : 발주정보 수정.	                         	             	 			-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.24  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<update id="updateOrdr" parameterType="com.at.apcss.am.ordr.vo.OrdrVO">
		<![CDATA[
		UPDATE TB_OUTORDR_INFO
		   SET SYS_LAST_CHG_DT 			= SYSDATE
    		 , SYS_LAST_CHG_USER_ID		= #{sysLastChgUserId}
    		 , SYS_LAST_CHG_PRGRM_ID 	= #{sysLastChgPrgrmId}
    		 , RCPTN_SE_CD 				= #{rcptnSeCd}
    		 , RCPTNNO 					= #{rcptnno}
    		 , RCPT_CFMTN_APC_CD 		= #{rcptCfmtnApcCd}
    		 , RCPT_CFMTN_YMD 			= #{rcptCfmtnYmd}
    		 , SPMT_CMNDNO 				= #{spmtCmndno}
    		 , DOC_NO 					= #{docNo}
    		 , CNPT_ORDRNO 				= #{cnptOrdrno}
    		 , OUTORDR_TYPE 			= #{outordrType}
    		 , WRHS_TYPE 				= #{wrhsType}
    		 , OUTORDR_YMD 				= #{outordrYmd}
    		 , ORDR_PRSN 				= #{ordrPrsn}
    		 , ORDR_PRSN_CD 			= #{ordrPrsnCd}
    		 , DOCK_INFO 				= #{dockInfo}
    		 , SPLY_PRSN 				= #{splyPrsn}
    		 , GDS_CD 					= #{gdsCd}
    		 , ITEM_CD 					= #{itemCd}
    		 , VRTY_CD 					= #{vrtyCd}
    		 , SPCFCT_CD 				= #{spcfctCd}
    		 , TPND 					= #{tpnd}
    		 , TPNB 					= #{tpnb}
    		 , DIAMONDLINE 				= #{diamondline}
    		 , DLDTN 					= #{dldtn}
    		 , BX_GDS_QNTT 				= #{bxGdsQntt}
    		 , OUTORDR_QNTT 			= #{outordrQntt}
    		 , PIECE_QNTT 				= #{pieceQntt}
    		 , UNIT_CD 					= #{unitCd}
    		 , BX_UNTPRC 				= #{bxUntprc}
    		 , OUTORDR_UNTPRC 			= #{outordrUntprc}
    		 , OUTORDR_UNIT_CD 			= #{outordrUnitCd}
    		 , LOT 						= #{lot}
    		 , TX_AMT 					= #{txAmt}
    		 , OUTORDR_AMT 				= #{outordrAmt}
    		 , DLDTN_CD 				= #{dldtnCd}
    		 , WRHS_YMD 				= #{wrhsYmd}
    		 , DLVGDS_NM 				= #{dlvgdsNm}
    		 , DLVGDS_CD 				= #{dlvgdsCd}
    		 , APC_CNPT_NM 				= #{apcCnptNm}
    		 , APC_CNPT_CD 				= #{apcCnptCd}
    		 , CNTR_SE 					= #{cntrSe}
    		 , CNTR_RCVD_WRHS_YMD 		= #{cntrRcvdWrhsYmd}
    		 , CNTR_CD 					= #{cntrCd}
    		 , CNTR_NM 					= #{cntrNm}
    		 , DLVGDS_SE_CD 			= #{dlvgdsSeCd}
    		 , ETC 						= #{etc}
    		 , BUYER_NM 				= #{buyerNm}
    		 , OUTORDR_WGHT 			= #{outordrWght}
    		 , PIECE_WGHT 				= #{pieceWght}
    		 , UNIT_WGHT 				= #{unitWght}
    		 , SPMT_PCKG_UNIT_CD 		= #{spmtPckgUnitCd}
    		 , GRD_CD 					= #{grdCd}
    		 , DEL_YN					= #{delYn}
		 WHERE APC_CD 					= #{apcCd}
		   AND APC_SE_CD 				= #{apcSeCd}
		   AND OUTORDRNO 				= #{outordrno}
		]]>
	</update>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.deleteOrdr					-->
	<!-- DESC : 발주정보 삭제.	                         	             		 		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.24  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<update id="deleteOrdr" parameterType="com.at.apcss.am.ordr.vo.OrdrVO">
		<![CDATA[
		UPDATE TB_OUTORDR_INFO	/* com.at.apcss.am.ordr.mapper.OrdrMapper.deleteOrdr */
		   SET SYS_LAST_CHG_DT 			= SYSDATE
    		 , SYS_LAST_CHG_USER_ID		= #{sysLastChgUserId}
    		 , SYS_LAST_CHG_PRGRM_ID 	= #{sysLastChgPrgrmId}
    		 , DEL_YN					= 'Y'
		 WHERE APC_CD 		= #{apcCd}
		   AND APC_SE_CD 	= #{apcSeCd}
		   AND OUTORDRNO 	= #{outordrno}
		]]>
	</update>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.deleteOrdr					-->
	<!-- DESC : 발주정보 출하지시번호 저장.	                         	            -->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.24  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<update id="updateCmndno" parameterType="com.at.apcss.am.ordr.vo.OrdrVO" >
		<![CDATA[
			UPDATE TB_OUTORDR_INFO	/* com.at.apcss.am.ordr.mapper.OrdrMapper.deleteOrdr */
			   SET SYS_LAST_CHG_DT 			= SYSDATE
	    		 , SYS_LAST_CHG_USER_ID		= #{sysLastChgUserId}
	    		 , SYS_LAST_CHG_PRGRM_ID 	= #{sysLastChgPrgrmId}
	    		 , SPMT_CMNDNO				= #{spmtCmndno}
			 WHERE APC_CD 		= #{apcCd}
			   AND APC_SE_CD 	= #{apcSeCd}
			   AND OUTORDRNO 	= #{outordrno}
		]]>
	</update>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.deleteOrdr					-->
	<!-- DESC : 발주정보 출하지시번호 확인.	                         	            -->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.24  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectOrdrCheck" parameterType="com.at.apcss.am.ordr.vo.OrdrVO" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			  FROM TB_OUTORDR_INFO
			 WHERE APC_CD 		= #{apcCd}
			   AND APC_SE_CD 	= #{apcSeCd}
			   AND OUTORDRNO 	= #{outordrno}
			   AND SPMT_CMNDNO	= #{spmtCmndno}
		]]>
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.selectMrktOrdrDtlList		-->
	<!-- DESC : 대형마트 발주수신 상세목록 조회.	                         	        -->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.04  	김호        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectMrktOrdrDtlList" parameterType="com.at.apcss.am.ordr.vo.MrktOrdrDtlVO" resultType="com.at.apcss.am.ordr.vo.MrktOrdrDtlVO">
		<![CDATA[
			SELECT /* com.at.apcss.am.ordr.mapper.OrdrMapper.selectMrktOrdrDtlList */
					  MO.ORDR_APC_CD		AS ORDR_APC_CD
					, MO.LGSZ_MRKT_CD		AS LGSZ_MRKT_CD
					, MO.RCPTN_SE_CD		AS RCPTN_SE_CD
					, MO.APC_SE_CD			AS APC_SE_CD
			     	, MO.APC_OUTORDRNO		AS APC_OUTORDRNO
					, MO.WRHS_YMD			AS WRHS_YMD
					, MO.ORDR_SEQ			AS ORDR_SEQ
					, MO.ORDR_CRT_DT		AS ORDR_CRT_DT
					, MO.ORDR_CHG_DT		AS ORDR_CHG_DT
					, MO.ORDR_PRCS_CD		AS ORDR_PRCS_CD
					, MO.ORDR_PRCS_DT		AS ORDR_PRCS_DT
					, MO.ORDR_PRCS_MSG		AS ORDR_PRCS_MSG
					, MO.OUTORDRNO			AS OUTORDRNO
					, MO.TOT_OUTORDR_AMT	AS TOT_OUTORDR_AMT
					, MO.OUTORDR_YMD		AS OUTORDR_YMD
					, MO.MRKT_WRHS_KND		AS MRKT_WRHS_KND
					, MO.TRSM_YMD			AS TRSM_YMD
					, MO.TRSM_TM			AS TRSM_TM
					, MO.RCPTN_YMD			AS RCPTN_YMD
					, MO.RCPTN_TM			AS RCPTN_TM
					, MO.RCPTN_YN			AS RCPTN_YN
					, MO.ORDRR				AS ORDRR
					, MO.CNTR_CD			AS CNTR_CD
					, MO.CNTR_NM			AS CNTR_NM
					, MO.SPLR_CD			AS SPLR_CD
					, MO.SPLR_NM			AS SPLR_NM
					, MO.USER_ID			AS USER_ID
					, MO.BPLC_CD			AS BPLC_CD
					, MO.CO_CD				AS CO_CD
					, MO.CO_NM				AS CO_NM
					, MO.VR_WAREHOUSE_CD	AS VR_WAREHOUSE_CD
					, MO.VR_WAREHOUSE_TXT	AS VR_WAREHOUSE_TXT
					, MO.VR_WAREHOUSE_NM	AS VR_WAREHOUSE_NM
					, MO.ORDR_DSCTN			AS ORDR_DSCTN
					, MO.DTL_SEQ			AS DTL_SEQ
					, MO.MRKT_GDS_CD 		AS MRKT_GDS_CD
					, MO.MRKT_GDS_NM		AS MRKT_GDS_NM
					, MO.MRKT_NTSL_CD		AS MRKT_NTSL_CD
					, MO.STOR_CD			AS STOR_CD
					, MO.STOR_NM			AS STOR_NM
					, MO.MRKT_WRHS_TYPE		AS MRKT_WRHS_TYPE
					, MO.MRKT_WRHS_TYPE_NM	AS MRKT_WRHS_TYPE_NM
					, MO.UP_GRD_ITEM		AS UP_GRD_ITEM
					, MO.BX_GDS_QNTT		AS BX_GDS_QNTT
					, MO.OUTORDR_QNTT		AS OUTORDR_QNTT
					, MO.OUTORDR_UNIT		AS OUTORDR_UNIT
					, MO.PIECE_QNTT			AS PIECE_QNTT
					, MO.ZCST_QNTT			AS ZCST_QNTT
					, MO.PIECE_UNTPRC		AS PIECE_UNTPRC
					, MO.TXAMT				AS TXAMT
					, MO.OUTORDR_AMT		AS OUTORDR_AMT
					, MO.OUTORDR_UNTPRC		AS OUTORDR_UNTPRC
					, MO.WRHS_QNTT			AS WRHS_QNTT
					, MO.RECEIPT_YN			AS RECEIPT_YN
					, (SELECT FN_GET_COM_CD_VL_NM('LGSZ_MRKT_CD', MO.LGSZ_MRKT_CD) FROM DUAL)          AS LGSZ_MRKT_NM
					, (SELECT FN_GET_COM_CD_VL_NM('RCPTN_SE_CD', MO.RCPTN_SE_CD) FROM DUAL)          AS RCPTN_SE_NM
			  FROM (
					SELECT
						  MH.ORDR_APC_CD			AS ORDR_APC_CD
						, '21'								AS LGSZ_MRKT_CD
						, (SELECT FN_GET_COM_CD_CHR_VL('LGSZ_MRKT_CD', '21') FROM DUAL) AS RCPTN_SE_CD
						, OI.APC_SE_CD				AS APC_SE_CD
					    , OI.OUTORDRNO				AS APC_OUTORDRNO
						, MH.WRHS_YMD				AS WRHS_YMD
						, MH.ORDR_SEQ				AS ORDR_SEQ
						, MH.ORDR_CRT_DT			AS ORDR_CRT_DT
						, MH.ORDR_CHG_DT			AS ORDR_CHG_DT
						, MH.ORDR_PRCS_CD		AS ORDR_PRCS_CD
						, MH.ORDR_PRCS_DT			AS ORDR_PRCS_DT
						, MH.ORDR_PRCS_MSG		AS ORDR_PRCS_MSG
						, MH.OUTORDRNO				AS OUTORDRNO
						, MH.OUTORDR_AMT			AS TOT_OUTORDR_AMT
						, MH.OUTORDR_YMD			AS OUTORDR_YMD
						, MH.MRKT_WRHS_KND		AS MRKT_WRHS_KND
						, MH.TRSM_YMD		AS TRSM_YMD
						, MH.TRSM_TM			AS TRSM_TM
						, MH.RCPTN_YMD		AS RCPTN_YMD
						, MH.RCPTN_TM		AS RCPTN_TM
						, MH.RCPTN_YN		AS RCPTN_YN
						, MH.ORDRR		AS ORDRR
						, MH.CNTR_CD		AS CNTR_CD
						, MH.CNTR_NM		AS CNTR_NM
						, MH.SPLR_CD		AS SPLR_CD
						, MH.SPLR_NM		AS SPLR_NM
						, MH.USER_ID		AS USER_ID
						, MH.BPLC_CD		AS BPLC_CD
						, MH.CO_CD		AS CO_CD
						, MH.CO_NM		AS CO_NM
						, MH.VR_WAREHOUSE_CD		AS VR_WAREHOUSE_CD
						, MH.VR_WAREHOUSE_TXT		AS VR_WAREHOUSE_TXT
						, MH.VR_WAREHOUSE_NM		AS VR_WAREHOUSE_NM
						, NULL							AS ORDR_DSCTN
						, MD.DTL_SEQ					AS DTL_SEQ
						, MD.MRKT_GDS_CD			AS MRKT_GDS_CD
						, MD.MRKT_GDS_NM			AS MRKT_GDS_NM
						, NULL							AS MRKT_NTSL_CD

						, MD.STOR_CD					AS STOR_CD
						, MD.STOR_NM					AS STOR_NM
						, MD.MRKT_WRHS_TYPE		AS MRKT_WRHS_TYPE
						, MD.MRKT_WRHS_TYPE_NM	AS MRKT_WRHS_TYPE_NM
						, MD.UP_GRD_ITEM			AS UP_GRD_ITEM
						, MD.BX_GDS_QNTT			AS BX_GDS_QNTT
						, MD.OUTORDR_QNTT		AS OUTORDR_QNTT
						, MD.OUTORDR_UNIT			AS OUTORDR_UNIT
						, MD.PIECE_QNTT				AS PIECE_QNTT
						, MD.ZCST_QNTT				AS ZCST_QNTT
						, MD.PIECE_UNTPRC			AS PIECE_UNTPRC
						, MD.TXAMT					AS TXAMT
						, MD.OUTORDR_AMT			AS OUTORDR_AMT
						, MD.OUTORDR_UNTPRC	AS OUTORDR_UNTPRC
						, MD.WRHS_QNTT				AS WRHS_QNTT
						, CASE
							WHEN OI.RCPT_CFMTN_YMD IS NOT NULL THEN 'Y'
							ELSE 'N'
						  END				AS RECEIPT_YN

					  FROM TB_MRKT_ORDR_IF_HP MH

					  JOIN TB_MRKT_ORDR_IF_HP_DTL MD
						ON MD.ORDR_APC_CD = MH.ORDR_APC_CD
					   AND MD.WRHS_YMD = MH.WRHS_YMD
					   AND MD.ORDR_SEQ = MH.ORDR_SEQ
					   AND MD.OUTORDRNO = MH.OUTORDRNO

					  JOIN TB_OUTORDR_INFO OI
						ON OI.APC_CD = MD.ORDR_APC_CD
					   AND OI.WRHS_YMD = MD.WRHS_YMD
					   AND OI.ORDR_SEQ = MD.ORDR_SEQ
					   AND OI.DTL_SEQ = MD.DTL_SEQ
					   AND OI.DEL_YN = 'N'

					 WHERE MH.ORDR_APC_CD = #{apcCd}
					   AND MH.WRHS_YMD BETWEEN #{wrhsYmdFrom} AND #{wrhsYmdTo}
					   AND #{lgszMrktCd} = '21'
		]]>
		<choose>
			<when test='receiptYn != null and receiptYn.equals("Y")'>
				AND OI.RCPT_CFMTN_YMD IS NOT NULL
			</when>
			<when test='receiptYn != null and receiptYn.equals("N")'>
				AND OI.RCPT_CFMTN_YMD IS NULL
			</when>
			<otherwise>
			</otherwise>
		</choose>
		<if test='mrktGdsCd != null and mrktGdsCd != ""'>
				AND MD.MRKT_GDS_CD LIKE '%' || #{mrktGdsCd} || '%'
		</if>
		<if test='mrktGdsNm != null and mrktGdsNm != ""'>
			AND MD.MRKT_GDS_NM LIKE '%' || #{mrktGdsNm} || '%'
		</if>
		<![CDATA[
					UNION ALL
					SELECT
						  MH.ORDR_APC_CD			AS ORDR_APC_CD
						, MH.LGSZ_MRKT_CD			AS LGSZ_MRKT_CD
						, (SELECT FN_GET_COM_CD_CHR_VL('LGSZ_MRKT_CD', MH.LGSZ_MRKT_CD) FROM DUAL) AS RCPTN_SE_CD
						, OI.APC_SE_CD				AS APC_SE_CD
					    , OI.OUTORDRNO				AS APC_OUTORDRNO
						, MH.WRHS_YMD				AS WRHS_YMD
						, MH.ORDR_SEQ				AS ORDR_SEQ
						, MH.ORDR_CRT_DT			AS ORDR_CRT_DT
						, MH.ORDR_CHG_DT			AS ORDR_CHG_DT
						, MH.ORDR_PRCS_CD		AS ORDR_PRCS_CD
						, MH.ORDR_PRCS_DT			AS ORDR_PRCS_DT
						, MH.ORDR_PRCS_MSG		AS ORDR_PRCS_MSG
						, MH.OUTORDRNO				AS OUTORDRNO
						, MH.OUTORDR_AMT			AS TOT_OUTORDR_AMT
						, MH.OUTORDR_YMD			AS OUTORDR_YMD
						, MH.MRKT_WRHS_KND		AS MRKT_WRHS_KND
						, MH.TRSM_YMD		AS TRSM_YMD
						, MH.TRSM_TM			AS TRSM_TM
						, MH.RCPTN_YMD		AS RCPTN_YMD
						, MH.RCPTN_TM		AS RCPTN_TM
						, MH.RCPTN_YN		AS RCPTN_YN
						, MH.ORDRR		AS ORDRR
						, MH.CNTR_CD		AS CNTR_CD
						, MH.CNTR_NM		AS CNTR_NM
						, MH.SPLR_CD		AS SPLR_CD
						, MH.SPLR_NM		AS SPLR_NM
						, MH.USER_ID		AS USER_ID
						, MH.BPLC_CD		AS BPLC_CD
						, MH.CO_CD		AS CO_CD
						, MH.CO_NM		AS CO_NM
						, MH.WAREHOUSE_CD		AS VR_WAREHOUSE_CD
						, MH.WAREHOUSE_TXT		AS VR_WAREHOUSE_TXT
						, MH.WAREHOUSE_NM		AS VR_WAREHOUSE_NM
						, MH.ORDR_DSCTN			AS ORDR_DSCTN

						, MD.DTL_SEQ					AS DTL_SEQ
						, MD.MRKT_GDS_CD			AS MRKT_GDS_CD
						, MD.MRKT_GDS_NM			AS MRKT_GDS_NM
						, MD.MRKT_NTSL_CD			AS MRKT_NTSL_CD

						, MD.STOR_CD					AS STOR_CD
						, MD.STOR_NM					AS STOR_NM
						, MD.MRKT_WRHS_TYPE		AS MRKT_WRHS_TYPE
						, MD.MRKT_WRHS_TYPE_NM	AS MRKT_WRHS_TYPE_NM
						, MD.UP_GRD_ITEM			AS UP_GRD_ITEM
						, MD.BX_GDS_QNTT			AS BX_GDS_QNTT
						, MD.OUTORDR_QNTT		AS OUTORDR_QNTT
						, MD.OUTORDR_UNIT			AS OUTORDR_UNIT
						, MD.PIECE_QNTT				AS PIECE_QNTT
						, MD.ZCST_QNTT				AS ZCST_QNTT
						, MD.PIECE_UNTPRC			AS PIECE_UNTPRC
						, MD.TXAMT					AS TXAMT
						, MD.OUTORDR_AMT			AS OUTORDR_AMT
						, MD.OUTORDR_UNTPRC	AS OUTORDR_UNTPRC
						, MD.WRHS_QNTT				AS WRHS_QNTT
						, CASE
							WHEN OI.RCPT_CFMTN_YMD IS NOT NULL THEN 'Y'
							ELSE 'N'
						  END				AS RECEIPT_YN

					  FROM TB_MRKT_ORDR_IF_LT MH

					  JOIN TB_MRKT_ORDR_IF_LT_DTL MD
						ON MD.ORDR_APC_CD = MH.ORDR_APC_CD
					   AND MD.WRHS_YMD = MH.WRHS_YMD
					   AND MD.ORDR_SEQ = MH.ORDR_SEQ
					   AND MD.OUTORDRNO = MH.OUTORDRNO

					  JOIN TB_OUTORDR_INFO OI
						ON OI.APC_CD = MD.ORDR_APC_CD
					   AND OI.WRHS_YMD = MD.WRHS_YMD
					   AND OI.ORDR_SEQ = MD.ORDR_SEQ
					   AND OI.DTL_SEQ = MD.DTL_SEQ
					   AND OI.DEL_YN = 'N'

					 WHERE MH.ORDR_APC_CD = #{apcCd}
					   AND MH.WRHS_YMD BETWEEN #{wrhsYmdFrom} AND #{wrhsYmdTo}
					   AND #{lgszMrktCd} IN ('31', '32')
		]]>
		<choose>
			<when test='receiptYn != null and receiptYn.equals("Y")'>
					AND OI.RCPT_CFMTN_YMD IS NOT NULL
			</when>
			<when test='receiptYn != null and receiptYn.equals("N")'>
				AND OI.RCPT_CFMTN_YMD IS NULL
			</when>
			<otherwise>
			</otherwise>
		</choose>
		<if test='mrktGdsCd != null and mrktGdsCd != ""'>
			AND MD.MRKT_GDS_CD LIKE '%' || #{mrktGdsCd} || '%'
		</if>
		<if test='mrktGdsNm != null and mrktGdsNm != ""'>
			AND MD.MRKT_GDS_NM LIKE '%' || #{mrktGdsNm} || '%'
		</if>
		<![CDATA[
			  ) MO
			 WHERE 1=1

			 ORDER BY ORDR_APC_CD, WRHS_YMD, LGSZ_MRKT_CD, ORDR_SEQ
		]]>

	</select>


	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.updateOutordrReceipt		-->
	<!-- DESC : 대형마트 발주수신 상세목록 조회.	                         	        -->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.04  	김호        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<update id="updateOutordrReceipt" parameterType="com.at.apcss.am.ordr.vo.MrktOrdrDtlVO">
		<![CDATA[
			UPDATE /* com.at.apcss.am.ordr.mapper.OrdrMapper.updateOutordrReceipt */
				TB_OUTORDR_INFO
			SET
			      SYS_LAST_CHG_DT 			= SYSDATE
				, SYS_LAST_CHG_USER_ID		= #{sysLastChgUserId}
				, SYS_LAST_CHG_PRGRM_ID 	= #{sysLastChgPrgrmId}
				, RCPT_CFMTN_APC_CD		= #{ordrApcCd}
				, RCPT_CFMTN_YMD		= TO_CHAR(SYSDATE, 'YYYYMMDD')
			WHERE APC_CD		= #{ordrApcCd}
			  AND APC_SE_CD 	= #{apcSeCd}
			  AND OUTORDRNO 	= #{apcOutordrno}
		]]>
	</update>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.insertSpMrktRcptOrdrCfmtn	-->
	<!-- DESC : 대형마트 발주수신 접수처리.	                         	        	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.04  	김호        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<insert id="insertSpMrktRcptOrdrCfmtn" statementType="CALLABLE" parameterType="com.at.apcss.am.ordr.vo.MrktOrdrDtlVO">
		<![CDATA[
			{call /* com.at.apcss.am.ordr.mapper.OrdrMapper.insertSpMrktRcptOrdrCfmtn */
				SP_MRKT_RCPT_ORDR_CFMTN (
					  #{sysLastChgUserId}
					, #{sysLastChgPrgrmId}
					, #{ordrApcCd}
					, #{apcSeCd}
					, #{apcOutordrno}
					, #{rtnCd, jdbcType=VARCHAR, mode=OUT}
					, #{rtnMsg, jdbcType=VARCHAR, mode=OUT}
					)
			}
		]]>
	</insert>


	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.ordr.mapper.OrdrMapper.insertSpMrktRcptOrdrCncl	-->
	<!-- DESC : 대형마트 발주수신 접수취소.	                         	        	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.04  	김호        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<insert id="insertSpMrktRcptOrdrCncl" statementType="CALLABLE" parameterType="com.at.apcss.am.ordr.vo.MrktOrdrDtlVO">
		<![CDATA[
		{call /* com.at.apcss.am.ordr.mapper.OrdrMapper.insertSpMrktRcptOrdrCncl */
			SP_MRKT_RCPT_ORDR_CNCL (
					#{sysLastChgUserId}
					, #{sysLastChgPrgrmId}
					, #{ordrApcCd}
					, #{apcSeCd}
					, #{apcOutordrno}
					, #{rtnCd, jdbcType=VARCHAR, mode=OUT}
					, #{rtnMsg, jdbcType=VARCHAR, mode=OUT}
				)
			}
		]]>
	</insert>
</mapper>


