<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : SpmtCmndMapper.xml                                   				-->
<!-- DESC : 출하지시조회 mapper                   				                -->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2023.08.16  	하민우        	Initial Creation                            -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.am.spmt.mapper.SpmtCmndMapper">
	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.spmt.mapper.SpmtCmndMapper.selectSpmtCmndTrgList	-->
	<!-- DESC : 출하지시대상내역 목록 조회.	                         	            -->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.23  	정희운        	Initial Creation                            -->
	<!-- 2023.10.04  	김호        	Initial 쿼리 수정                           -->
	<!-- ==========================================================================	-->
	<select id="selectSpmtCmndTrgList" parameterType="com.at.apcss.am.ordr.vo.OrdrVO" resultType="com.at.apcss.am.ordr.vo.OrdrVO">
		<![CDATA[
	  		SELECT pt0.* /* com.at.apcss.am.spmt.mapper.SpmtCmndMapper.selectSpmtCmndTrgList */
			    , (SELECT FN_GET_VRTY_NM(pt0.ITEM_CD, pt0.VRTY_CD, pt0.APC_CD) FROM DUAL)   		AS VRTY_NM
			    , (SELECT FN_GET_SPCFCT_NM(pt0.ITEM_CD, pt0.SPCFCT_CD, pt0.APC_CD) FROM DUAL)    	AS SPCFCT_NM
			    , (SELECT FN_GET_GDS_NM(pt0.GDS_CD, pt0.APC_CD) FROM DUAL)							AS GDS_NM
			    , (SELECT FN_GET_CNPT_NM(pt0.APC_CNPT_CD, pt0.APC_CD) FROM DUAL)					AS CNPT_NM
			 FROM (
			        SELECT OI.APC_CD    			AS APC_CD
			             , OI.APC_SE_CD    			AS APC_SE_CD
			             , OI.OUTORDRNO    			AS OUTORDRNO
			             , OI.OUTORDR_YMD           AS OUTORDR_YMD
			             , OI.RCPTN_SE_CD    		AS RCPTN_SE_CD
			             , OI.APC_CNPT_NM    		AS APC_CNPT_NM
			             , OI.APC_CNPT_CD    		AS APC_CNPT_CD
			             , OI.GDS_CD    			AS GDS_CD
			             , OI.DLDTN    				AS DLDTN
			             , OI.ITEM_CD    			AS ITEM_CD
			             , OI.VRTY_CD    			AS VRTY_CD
			             , OI.SPCFCT_CD   	 		AS SPCFCT_CD
			             , OI.OUTORDR_QNTT          AS OUTORDR_QNTT
			             , OI.SPMT_PCKG_UNIT_CD     AS SPMT_PCKG_UNIT_CD
			             , OI.WRHS_YMD 				AS WRHS_YMD
			             , (SELECT GDS_GRD
                             FROM TB_SPMT_PCKG_UNIT X
                            WHERE X.APC_CD = OI.APC_CD
                              AND X.SPMT_PCKG_UNIT_CD = OI.SPMT_PCKG_UNIT_CD
                              AND X.DEL_YN = 'N'
                           ) AS GDS_GRD
			             , (SELECT MAX(WAREHOUSE_SE_CD)
			                  FROM TB_GDS_INVNTR X
			                 WHERE X.APC_CD = OI.APC_CD
			                   AND X.ITEM_CD = OI.ITEM_CD
			                   AND X.VRTY_CD = OI.VRTY_CD
			                   AND X.SPCFCT_CD = OI.SPCFCT_CD
			                   AND X.DEL_YN = 'N'
			               ) AS WAREHOUSE_SE_CD
			             , (SELECT WGHT
                              FROM TB_APC_SPCFCT_CRTR X
                             WHERE X.APC_CD = OI.APC_CD
			                   AND X.ITEM_CD = OI.ITEM_CD
			                   AND X.SPCFCT_CD = OI.SPCFCT_CD
			                   AND X.DEL_YN = 'N'
                           ) AS WGHT
			             , (SELECT SUM(INVNTR_QNTT)
			                  FROM TB_GDS_INVNTR X
			                 WHERE X.APC_CD = OI.APC_CD
			                   AND X.ITEM_CD = OI.ITEM_CD
			                   AND X.VRTY_CD = OI.VRTY_CD
			                   AND X.SPCFCT_CD = OI.SPCFCT_CD
			                   AND X.DEL_YN = 'N'
			               ) AS INVNTR_QNTT
			             , (SELECT SUM(INVNTR_WGHT)
			                  FROM TB_GDS_INVNTR X
			                 WHERE X.APC_CD = OI.APC_CD
			                   AND X.ITEM_CD = OI.ITEM_CD
			                   AND X.VRTY_CD = OI.VRTY_CD
			                   AND X.SPCFCT_CD = OI.SPCFCT_CD
			                   AND X.DEL_YN = 'N'
			               ) AS INVNTR_WGHT
			             , (SELECT SUM(SPMT_QNTT)
			                  FROM TB_SPMT_PRFMNC_DTL X
			                 WHERE X.APC_CD = OI.APC_CD
			                   AND X.OUTORDRNO = OI.OUTORDRNO
			                   AND X.DEL_YN = 'N'
			               ) AS SPMT_QNTT
			             , (SELECT SUM(SPMT_WGHT)
			                  FROM TB_SPMT_PRFMNC_DTL X
			                 WHERE X.APC_CD = OI.APC_CD
			                   AND X.OUTORDRNO = OI.OUTORDRNO
			                   AND X.DEL_YN = 'N'
			               ) AS SPMT_WGHT
                        , (SELECT SUM(CMND_QNTT)
                             FROM TB_SPMT_CMND X
                            WHERE X.APC_CD = OI.APC_CD
                              AND X.OUTORDRNO = OI.OUTORDRNO
                              AND X.DEL_YN = 'N'
                          ) AS CMND_QNTT
                        , (SELECT SUM(CMND_WGHT)
                             FROM TB_SPMT_CMND X
                            WHERE X.APC_CD = OI.APC_CD
                              AND X.OUTORDRNO = OI.OUTORDRNO
                              AND X.DEL_YN = 'N'
                          ) AS CMND_WGHT
			        FROM TB_OUTORDR_INFO OI
			       WHERE OI.DEL_YN = 'N'
			         AND OI.RCPT_CFMTN_APC_CD  = #{apcCd}
		]]>
		<if test='outordrYmdFrom != null and outordrYmdFrom != ""'>
		   	   AND OI.OUTORDR_YMD <![CDATA[>=]]> #{outordrYmdFrom}
		</if>
		<if test='outordrYmdTo != null and outordrYmdTo != ""'>
		       AND OI.OUTORDR_YMD <![CDATA[<=]]> #{outordrYmdTo}
		</if>
		<if test='itemCd != null and itemCd != ""'>
		       AND OI.ITEM_CD = #{itemCd}
		</if>
		<if test='vrtyCd != null and vrtyCd != ""'>
		       AND OI.VRTY_CD = #{vrtyCd}
		</if>
		<if test='spcfctCd != null and spcfctCd != ""'>
		       AND OI.SPCFCT_CD = #{spcfctCd}
		</if>
		<if test='apcCnptNm != null and apcCnptNm != ""'>
		       AND (SELECT FN_GET_CNPT_NM(OI.APC_CNPT_CD, OI.APC_CD) FROM DUAL) LIKE '%' || #{apcCnptNm} || '%'
		</if>
		<if test='warehouseSeCd != null and warehouseSeCd != ""'>
			   AND (SELECT MAX(WAREHOUSE_SE_CD) FROM TB_GDS_INVNTR X WHERE X.APC_CD = OI.APC_CD
		       		AND X.ITEM_CD = OI.ITEM_CD AND X.VRTY_CD = OI.VRTY_CD AND X.SPCFCT_CD = OI.SPCFCT_CD AND X.DEL_YN = 'N') = #{warehouseSeCd}
		</if>
  		  	) pt0
  		  WHERE pt0.OUTORDR_QNTT - NVL(SPMT_QNTT,0) - NVL(CMND_QNTT,0) > 0
            AND NVL(pt0.INVNTR_QNTT, 0) - NVL(pt0.CMND_QNTT, 0) > 0
  		<if test='warehouseSeCd != null and warehouseSeCd != ""'>
		    AND pt0.WAREHOUSE_SE_CD = #{warehouseSeCd}
		</if>
   	</select>

<!-- ==============================================================================	-->
	<!-- NAME : com.at.apcss.am.spmt.mapper.SpmtCmndMapper.selectRegSpmtCmndList	-->
	<!-- DESC : 출하지시내역 조회.	                         	             	 	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.25  	정희운        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectRegSpmtCmndList" parameterType="com.at.apcss.am.spmt.vo.SpmtCmndVO" resultType="com.at.apcss.am.spmt.vo.SpmtCmndVO">
    	<![CDATA[
			SELECT pt0.*  /* com.at.apcss.am.spmt.mapper.SpmtPrfmncMapper.selectRegSpmtCmndList */
			     , (SELECT FN_GET_VRTY_NM(pt0.ITEM_CD, pt0.VRTY_CD, pt0.APC_CD) FROM DUAL)          AS VRTY_NM
			     , (SELECT FN_GET_SPCFCT_NM(pt0.ITEM_CD, pt0.SPCFCT_CD, pt0.APC_CD) FROM DUAL)      AS SPCFCT_NM
			     , (SELECT FN_GET_COM_CD_VL_NM('GDS_GRD', pt0.GDS_GRD) FROM DUAL)                   AS GDS_GRD_NM
			     , (SELECT FN_GET_TRSPRT_CO_NM(pt0.TRSPRT_CO_CD, pt0.APC_CD) FROM DUAL)             AS TRSPRT_CO_NM
			     , (SELECT FN_GET_SPMT_PCKG_UNIT_NM(pt0.SPMT_PCKG_UNIT_CD, pt0.APC_CD) FROM DUAL)   AS SPMT_PCKG_UNIT_NM
			     , (SELECT FN_GET_CNPT_NM(pt0.CNPT_CD, pt0.APC_CD) FROM DUAL)                       AS CNPT_NM
			     , (SELECT FN_GET_GDS_NM(pt0.GDS_CD, pt0.APC_CD) FROM DUAL)                         AS GDS_NM
			 FROM(
			        SELECT
			              SC.APC_CD             AS APC_CD
			            , SC.SPMT_CMNDNO        AS SPMT_CMNDNO
			            , SC.SPMT_CMND_SN		AS SPMT_CMND_SN
			            , MAX(SC.CMND_YMD)      AS CMND_YMD
			            , MAX(SC.CNPT_CD)       AS CNPT_CD
			            , MAX(SC.DLDTN)         AS DLDTN
			            , MAX(SC.TRSPRT_CO_CD)  AS TRSPRT_CO_CD
			            , SC.GDS_GRD            AS GDS_GRD
			            , SUM(SC.CMND_QNTT)     AS CMND_QNTT
			            , SUM(SC.CMND_WGHT)     AS CMND_WGHT
			            , SC.SPMT_PCKG_UNIT_CD  AS SPMT_PCKG_UNIT_CD
			            , MAX(SC.OUTORDRNO)     AS OUTORDRNO
			            , SC.ITEM_CD            AS ITEM_CD
			            , SC.VRTY_CD            AS VRTY_CD
			            , SC.SPCFCT_CD          AS SPCFCT_CD
			            , SC.GDS_CD             AS GDS_CD
			            , MAX(SC.RMRK)          AS RMRK
			            , (SELECT WRHS_YMD
			                 FROM TB_OUTORDR_INFO X
			                WHERE X.APC_CD = SC.APC_CD
			                  AND X.OUTORDRNO = SC.OUTORDRNO
			                  AND X.DEL_YN = 'N'
			              ) AS WRHS_YMD
			            , (SELECT SUM(SPMT_QNTT)
                             FROM TB_SPMT_PRFMNC_DTL X
                            WHERE X.APC_CD = SC.APC_cD
                              AND X.SPMT_CMNDNO = SC.SPMT_CMNDNO
                              AND X.DEL_YN = 'N'
                           ) AS SPMT_QNTT
                         , (SELECT SUM(SPMT_WGHT)
                             FROM TB_SPMT_PRFMNC_DTL X
                            WHERE X.APC_CD = SC.APC_cD
                              AND X.SPMT_CMNDNO = SC.SPMT_CMNDNO
                              AND X.DEL_YN = 'N'
                           ) AS SPMT_WGHT
			        FROM TB_SPMT_CMND SC
			       WHERE SC.DEL_YN = 'N'
		]]>
		<if test='apcCd != null and apcCd != ""'>
		   	   		AND SC.APC_CD = #{apcCd}
		</if>
		<choose>
			<when test='cmndYmd != null and cmndYmd != ""'>
		   	   		AND SC.CMND_YMD = #{cmndYmd}
			</when>
			<otherwise>
					AND SC.CMND_YMD <![CDATA[>=]]> TO_CHAR(SYSDATE, 'YYYYMMDD')
			</otherwise>
		</choose>
		<if test='itemCd != null and itemCd != ""'>
		       		AND SC.ITEM_CD = #{itemCd}
		</if>
		<if test='vrtyCd != null and vrtyCd != ""'>
		       		AND SC.VRTY_CD = #{vrtyCd}
		</if>
		<![CDATA[
 			 GROUP BY  SC.APC_CD
					 , SC.SPMT_CMNDNO
					 , SC.SPMT_CMND_SN
					 , SC.GDS_GRD
					 , SC.SPMT_PCKG_UNIT_CD
					 , SC.ITEM_CD
					 , SC.VRTY_CD
					 , SC.SPCFCT_CD
					 , SC.GDS_CD
					 , SC.OUTORDRNO
		 	) pt0
		]]>
    </select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.spmt.mapper.SpmtCmndMapper.selectSpmtCmndList		-->
	<!-- DESC : 출하지시조회 목록 조회.	                         	             	 	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.16  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectSpmtCmndList" parameterType="com.at.apcss.am.spmt.vo.SpmtCmndVO" resultType="com.at.apcss.am.spmt.vo.SpmtCmndVO">
    	<!-- Start 페이징 -->
    	<if test='pagingYn != null and pagingYn.equals("Y")'>
    		SELECT
    			  ROWNUM AS ROW_SEQ
    			, COUNT(*) OVER() AS TOTAL_RECORD_COUNT
    			, pt0.*
    		 	, (SELECT FN_GET_SPMT_PCKG_UNIT_NM(pt0.SPMT_PCKG_UNIT_CD, pt0.APC_CD) FROM DUAL) 	AS SPMT_PCKG_UNIT_NM
	    		, (SELECT FN_GET_VRTY_NM(pt0.ITEM_CD, pt0.VRTY_CD, pt0.APC_CD) FROM DUAL)			AS VRTY_NM
	    		, (SELECT FN_GET_SPCFCT_NM(pt0.ITEM_CD, pt0.SPCFCT_CD, pt0.APC_CD) FROM DUAL)		AS SPCFCT_NM
	    		, (SELECT FN_GET_GDS_NM(pt0.GDS_CD, pt0.APC_CD) FROM DUAL)							AS GDS_NM
		     	, (SELECT FN_GET_COM_CD_VL_NM('GDS_GRD', pt0.GDS_GRD) FROM DUAL) 					AS GDS_GRD_NM
		        , (SELECT FN_GET_TRSPRT_CO_NM(pt0.TRSPRT_CO_CD, pt0.APC_CD) FROM DUAL) 				AS TRSPRT_CO_NM
    		 	, (SELECT FN_GET_CNPT_NM(pt0.CNPT_CD, pt0.APC_CD) FROM DUAL)						AS CNPT_NM
                , pt0.SPMT_CMNDNO || '-' || pt0.SPMT_CMND_SN 										AS SPMT_CMNDNO_INDCT
    		 FROM (
    	</if>
    	<if test='pagingYn == null or pagingYn.equals("N")'>
    		SELECT
    			  pt0.*
    		 	, (SELECT FN_GET_SPMT_PCKG_UNIT_NM(pt0.SPMT_PCKG_UNIT_CD, pt0.APC_CD) FROM DUAL) 	AS SPMT_PCKG_UNIT_NM
	    		, (SELECT FN_GET_VRTY_NM(pt0.ITEM_CD, pt0.VRTY_CD, pt0.APC_CD) FROM DUAL)			AS VRTY_NM
	    		, (SELECT FN_GET_SPCFCT_NM(pt0.ITEM_CD, pt0.SPCFCT_CD, pt0.APC_CD) FROM DUAL)		AS SPCFCT_NM
	    		, (SELECT FN_GET_GDS_NM(pt0.GDS_CD, pt0.APC_CD) FROM DUAL)							AS GDS_NM
		     	, (SELECT FN_GET_COM_CD_VL_NM('GDS_GRD', pt0.GDS_GRD) FROM DUAL) 					AS GDS_GRD_NM
		        , (SELECT FN_GET_TRSPRT_CO_NM(pt0.TRSPRT_CO_CD, pt0.APC_CD) FROM DUAL) 				AS TRSPRT_CO_NM
    		 	, (SELECT FN_GET_CNPT_NM(pt0.CNPT_CD, pt0.APC_CD) FROM DUAL)						AS CNPT_NM
                , pt0.SPMT_CMNDNO || '-' || pt0.SPMT_CMND_SN 										AS SPMT_CMNDNO_INDCT
    		 FROM (
    	</if>
    	<!-- End 페이징 -->
    	<![CDATA[
	    	SELECT /* com.at.apcss.am.spmt.mapper.SpmtCmndMapper.selectSpmtCmndList */
	    		   SC.APC_CD                AS APC_CD
			     , SC.SPMT_CMNDNO           AS SPMT_CMNDNO
			     , SC.SPMT_CMND_SN          AS SPMT_CMND_SN
			     , SC.CMND_YMD              AS CMND_YMD
			     , SC.CNPT_CD               AS CNPT_CD
			     , SC.DLDTN                 AS DLDTN
			     , SC.TRSPRT_CO_CD          AS TRSPRT_CO_CD
			     , SC.GDS_GRD               AS GDS_GRD
			     , SC.CMND_QNTT             AS CMND_QNTT
			     , SC.CMND_WGHT             AS CMND_WGHT
			     , SC.SPMT_PCKG_UNIT_CD     AS SPMT_PCKG_UNIT_CD
			     , SC.OUTORDRNO             AS OUTORDRNO
			     , SC.ITEM_CD               AS ITEM_CD
			     , SC.VRTY_CD               AS VRTY_CD
			     , SC.SPCFCT_CD             AS SPCFCT_CD
			     , SC.GDS_CD                AS GDS_CD
			     , SC.RMRK                  AS RMRK
			     , SC.DEL_YN                AS DEL_YN
			     , (SELECT SUM(SPMT_QNTT)
			         FROM TB_SPMT_PRFMNC_DTL X
			        WHERE X.APC_CD = SC.APC_CD
			          AND X.SPMT_CMNDNO = SC.SPMT_CMNDNO
			          AND X.DEL_YN = 'N'
			       ) 						AS SPMT_QNTT
			     , (SELECT SUM(SPMT_WGHT)
			         FROM TB_SPMT_PRFMNC_DTL X
			        WHERE X.APC_CD = SC.APC_CD
			          AND X.SPMT_CMNDNO = SC.SPMT_CMNDNO
			          AND X.DEL_YN = 'N'
			       ) 						AS SPMT_WGHT
			  FROM TB_SPMT_CMND SC
			 WHERE SC.DEL_YN = 'N'
		]]>
		<if test='apcCd != null and apcCd != ""'>
		   	   AND SC.APC_CD = #{apcCd}
		</if>
		<if test='cmndYmd != null and cmndYmd != ""'>
		   	   AND SC.CMND_YMD = #{cmndYmd}
		</if>
		<if test='cmndYmdFrom != null and cmndYmdFrom != ""'>
		   	   AND SC.CMND_YMD <![CDATA[>=]]> #{cmndYmdFrom}
		</if>
		<if test='cmndYmdTo != null and cmndYmdTo != ""'>
		       AND SC.CMND_YMD <![CDATA[<=]]> #{cmndYmdTo}
		</if>
		<if test='cnptNm != null and cnptNm != ""'>
		       AND (SELECT FN_GET_CNPT_NM(SC.CNPT_CD, SC.APC_CD) FROM DUAL) LIKE '%' || #{cnptNm} || '%'
		</if>
		<if test='cnptCd != null and cnptCd != ""'>
		       AND SC.CNPT_CD = #{cnptCd}
		</if>
		<if test='trsprtCoCd != null and trsprtCoCd != ""'>
		       AND SC.TRSPRT_CO_CD = #{trsprtCoCd}
		</if>
		<if test='itemCd != null and itemCd != ""'>
		       AND SC.ITEM_CD = #{itemCd}
		</if>
		<if test='vrtyCd != null and vrtyCd != ""'>
		       AND SC.VRTY_CD = #{vrtyCd}
		</if>
		<if test='spcfctCd != null and spcfctCd != ""'>
		       AND SC.SPCFCT_CD = #{spcfctCd}
		</if>
		<if test='spmtPckgUnitCd != null and spmtPckgUnitCd != ""'>
		       AND SC.SPMT_PCKG_UNIT_CD = #{spmtPckgUnitCd}
		</if>
		<!-- Start 페이징 -->
    	<if test='pagingYn != null and pagingYn.equals("Y")'>
    		  ) pt0
			OFFSET (#{currentPageNo} - 1) * #{recordCountPerPage} ROWS
			FETCH FIRST #{recordCountPerPage} ROWS ONLY
    	</if>
    	<if test='pagingYn == null or pagingYn.equals("N")'>
    		  ) pt0
    	</if>
    	<!-- End 페이징 -->
    </select>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.spmt.mapper.SpmtCmndMapper.insertSpmtCmnd			-->
	<!-- DESC : 출하지시조회 목록 등록.	                         	             	 	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.16  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <insert id="insertSpmtCmnd" parameterType="com.at.apcss.am.spmt.vo.SpmtCmndVO">
		<![CDATA[
		INSERT INTO TB_SPMT_CMND
			(
				APC_CD
			  , SPMT_CMNDNO
			  , SPMT_CMND_SN
			  , CMND_YMD
			  , CNPT_CD
			  , DLDTN
			  , TRSPRT_CO_CD
			  , GDS_GRD
			  , CMND_QNTT
			  , CMND_WGHT
			  , SPMT_PCKG_UNIT_CD
			  , OUTORDRNO
			  , ITEM_CD
			  , VRTY_CD
			  , SPCFCT_CD
			  , GDS_CD
			  , RMRK
			  , SYS_FRST_INPT_DT
			  , SYS_FRST_INPT_PRGRM_ID
			  , SYS_FRST_INPT_USER_ID
			  , SYS_LAST_CHG_DT
			  , SYS_LAST_CHG_USER_ID
			  , SYS_LAST_CHG_PRGRM_ID
			)
		VALUES
			(
				#{apcCd}
			  , #{spmtCmndno}
			  , #{spmtCmndSn}
			  , #{cmndYmd}
			  , #{cnptCd}
			  , #{dldtn}
			  , #{trsprtCoCd}
			  , #{gdsGrd}
			  , #{cmndQntt}
			  , #{cmndWght}
			  , #{spmtPckgUnitCd}
			  , #{outordrno}
			  , #{itemCd}
			  , #{vrtyCd}
			  , #{spcfctCd}
			  , #{gdsCd}
			  , #{rmrk}
			  , SYSDATE
			  , #{sysFrstInptPrgrmId}
			  , #{sysFrstInptUserId}
			  , SYSDATE
			  , #{sysLastChgUserId}
			  , #{sysLastChgPrgrmId}
			)
		]]>
    </insert>

    <!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.spmt.mapper.SpmtCmndMapper.updateSpmtCmnd			-->
	<!-- DESC : 출하지시조회 목록 수정.	                         	             	 	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.16  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<update id="updateSpmtCmnd" parameterType="com.at.apcss.am.spmt.vo.SpmtCmndVO">
		<![CDATA[
		UPDATE TB_SPMT_CMND
		   SET SYS_LAST_CHG_DT 			= SYSDATE
    		 , SYS_LAST_CHG_USER_ID		= #{sysLastChgUserId}
    		 , SYS_LAST_CHG_PRGRM_ID 	= #{sysLastChgPrgrmId}
			 , TRSPRT_CO_NM				= #{trsprtCoNm}
    		 , CMND_YMD 				= #{cmndYmd}
    		 , CNPT_CD 					= #{cnptCd}
    		 , DLDTN 					= #{dldtn}
    		 , TRSPRT_CO_CD 			= #{trsprtCoCd}
		     , TRSPRT_CO_NM 			= #{trsprtCoNm}
    		 , GDS_GRD 					= #{gdsGrd}
    		 , CMND_QNTT 				= #{cmndQntt}
    		 , CMND_WGHT 				= #{cmndWght}
    		 , SPMT_PCKG_UNIT_CD 		= #{spmtPckgUnitCd}
    		 , ORDR_NO 					= #{ordrNo}
    		 , ITEM_CD 					= #{itemCd}
    		 , VRTY_CD 					= #{vrtyCd}
    		 , SPCFCT_CD 				= #{spcfctCd}
    		 , GDS_CD 					= #{gdsCd}
    		 , RMRK						= #{rmrk}
    		 , DEL_YN					= #{delYn}
		 WHERE APC_CD 					= #{apcCd}
		   AND SPMT_CMNDNO 				= #{spmtCmndno}
		   AND SPMT_CMND_SN 			= #{spmtCmndSn}
		]]>
	</update>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.am.spmt.mapper.SpmtCmndMapper.deleteSpmtCmnd			-->
	<!-- DESC : 출하지시조회 목록 삭제.	                         	             	 	-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.08.16  	하민우        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<delete id="deleteSpmtCmnd" parameterType="com.at.apcss.am.spmt.vo.SpmtCmndVO">
		<![CDATA[
		UPDATE TB_SPMT_CMND
		   SET SYS_LAST_CHG_DT 			= SYSDATE
    		 , SYS_LAST_CHG_USER_ID		= #{sysLastChgUserId}
    		 , SYS_LAST_CHG_PRGRM_ID 	= #{sysLastChgPrgrmId}
    		 , DEL_YN					= 'Y'
		 WHERE APC_CD 					= #{apcCd}
		   AND SPMT_CMNDNO 				= #{spmtCmndno}
		   AND SPMT_CMND_SN 			= #{spmtCmndSn}
		]]>
	</delete>
</mapper>


