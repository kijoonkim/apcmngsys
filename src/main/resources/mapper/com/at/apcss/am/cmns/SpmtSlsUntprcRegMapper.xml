<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : SpmtSlsUntprcRegMapper.xml                                   		-->
<!-- DESC : 출하매출단가 mapper                                             	-->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2023.08.01  	김 호        		Initial Creation                        -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper">

	<!-- ==================================================================================	-->
	<!-- NAME : com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.selectSpmtSlsUntprcReg	-->
	<!-- DESC : 출하매출단가 단건 조회.	                                       				-->
	<!-- ==================================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      					-->
	<!-- ===========  	============  	===================================================	-->
	<!-- 2023.08.01  	김 호        	Initial Creation                            		-->
	<!-- ==================================================================================	-->
    <select id="selectSpmtSlsUntprcReg" parameterType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO" resultType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO">
    	<![CDATA[
	    	SELECT /* com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.selectSpmtSlsUntprcReg */
				   SUR.APC_CD               AS APC_CD
			  FROM TB_SPMT_SLS_UNTPRC_REG SUR
		     WHERE SPU.APC_CD = #{apcCd}
		]]>
    </select>

	<!-- ====================================================================================== -->
	<!-- NAME : com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.selectSpmtSlsUntprcRegList	-->
	<!-- DESC : 출하매출단가 목록 조회.	                                       					-->
	<!-- ======================================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      						-->
	<!-- ===========  	============  	=======================================================	-->
	<!-- 2023.08.01  	김 호        	Initial Creation                            			-->
	<!-- ======================================================================================	-->
    <select id="selectSpmtSlsUntprcRegList" parameterType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO" resultType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO">
    	<![CDATA[
	    	SELECT /* com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.selectSpmtSlsUntprcRegList */
		     	   SUR.APC_CD               AS APC_CD
			     , SUR.SPMT_PCKG_UNIT_CD    AS SPMT_PCKG_UNIT_CD
			     , SUR.SPMT_SLS_UNTPRC_CD   AS SPMT_SLS_UNTPRC_CD
			     , SUR.SPMT_SLS_UNTPRC      AS SPMT_SLS_UNTPRC
			     , SUR.APLCN_CRTR_YMD		AS APLCN_CRTR_YMD
			     , SUR.RMRK                 AS RMRK
			     , SUR.DEL_YN               AS DEL_YN
			  FROM TB_SPMT_SLS_UNTPRC_REG   SUR
			     , TB_SPMT_PCKG_UNIT        SPU
			 WHERE SUR.SPMT_PCKG_UNIT_CD = SPU.SPMT_PCKG_UNIT_CD
			   AND SUR.APC_CD = SPU.APC_CD
			   AND SUR.DEL_YN = 'N'
			   AND SPU.DEL_YN = 'N'
			   AND SUR.APC_CD = #{apcCd}
			   AND SPU.ITEM_CD	= #{itemCd}
			   AND SPU.VRTY_CD	= #{vrtyCd}
			   AND SPU.SPCFCT_CD= #{spcfctCd}
		]]>

    </select>

    <!-- ==================================================================================	-->
	<!-- NAME : com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.insertSpmtSlsUntprcReg	-->
	<!-- DESC : 출하매출단가 등록.	                                       					-->
	<!-- ==================================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      					-->
	<!-- ===========  	============  	===================================================	-->
	<!-- 2023.08.01  	김 호        	Initial Creation                            		-->
	<!-- ==================================================================================	-->
    <insert id="insertSpmtSlsUntprcReg" parameterType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO">
    	<![CDATA[
	    	INSERT /* com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.insertSpmtSlsUntprcReg */
	    		INTO TB_SPMT_SLS_UNTPRC_REG
				(
					  APC_CD
					, SPMT_PCKG_UNIT_CD
					, SPMT_SLS_UNTPRC_CD
					, SPMT_SLS_UNTPRC
					, RMRK
					, APLCN_CRTR_YMD
		    		, SYS_FRST_INPT_DT
		    		, SYS_FRST_INPT_USER_ID
		    		, SYS_FRST_INPT_PRGRM_ID
		    		, SYS_LAST_CHG_DT
		    		, SYS_LAST_CHG_USER_ID
		    		, SYS_LAST_CHG_PRGRM_ID
	    		)
	   		VALUES
	   			(
	   				  #{apcCd}
					, #{spmtPckgUnitCd}
		    		, #{spmtSlsUntprcCd}
		    		, #{spmtSlsUntprc}
					, #{rmrk}
    	]]>
    	<choose>
    		<when test='aplcnCrtrYmd !=null and aplcnCrtrYmd !=""'>
	   				, #{aplcnCrtrYmd}
    		</when>
    		<otherwise>
    		  		, TO_CHAR(SYSDATE, 'YYYYMMDD')
    		</otherwise>
    	</choose>
    	<![CDATA[

		    		, SYSDATE
		    		, #{sysFrstInptUserId}
		    		, #{sysFrstInptPrgrmId}
		    		, SYSDATE
		    		, #{sysLastChgUserId}
		    		, #{sysLastChgPrgrmId}
	   			)
    	]]>
    </insert>

    <!-- ==================================================================================	-->
	<!-- NAME : com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.updateSpmtSlsUntprcReg	-->
	<!-- DESC : 출하매출단가 변경.	                                       					-->
	<!-- ==================================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      					-->
	<!-- ===========  	============  	===================================================	-->
	<!-- 2023.07.13  	김 호        	Initial Creation                            		-->
	<!-- ==================================================================================	-->
	<update id="updateSpmtSlsUntprcReg" parameterType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO">
		<![CDATA[
			UPDATE /* com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.updateSpmtSlsUntprcReg */
				TB_SPMT_SLS_UNTPRC_REG
			   SET
			   	  SYS_LAST_CHG_DT 			= SYSDATE
	    		, SYS_LAST_CHG_USER_ID		= #{sysLastChgUserId}
	    		, SYS_LAST_CHG_PRGRM_ID 	= #{sysLastChgPrgrmId}
				, SPMT_SLS_UNTPRC			= #{spmtSlsUntprc}
				, RMRK						= #{rmrk}
				, APLCN_CRTR_YMD			= #{aplcnCrtrYmd}
			 WHERE APC_CD					= #{apcCd}
			   AND SPMT_PCKG_UNIT_CD 		= #{spmtPckgUnitCd}
			   AND SPMT_SLS_UNTPRC_CD		= #{spmtSlsUntprcCd}
		]]>
	</update>

	<!-- ==================================================================================	-->
	<!-- NAME : com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.deleteSpmtSlsUntprcReg	-->
	<!-- DESC : 출하매출단가 삭제.	                                       					-->
	<!-- ==================================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      					-->
	<!-- ===========  	============  	===================================================	-->
	<!-- 2023.08.01  	김 호        	Initial Creation                            		-->
	<!-- ==================================================================================	-->
	<update id="deleteSpmtSlsUntprcReg" parameterType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO">
		<![CDATA[
			UPDATE TB_SPMT_SLS_UNTPRC_REG /* com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.deleteSpmtSlsUntprcReg */
			   SET DEL_YN 				= 'Y'
			 WHERE APC_CD				= #{apcCd}
			   AND SPMT_PCKG_UNIT_CD 	= #{spmtPckgUnitCd}
			   AND SPMT_SLS_UNTPRC_CD	= #{spmtSlsUntprcCd}
		]]>
	</update>

	<!-- ==============================================================================	-->
	<!-- NAME : com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.getSpmtSlsUntprcReg	-->
	<!-- DESC : 출하매출단가 자동발번 코드 조회.	                                	-->
	<!-- ==============================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      				-->
	<!-- ===========  	============  	===============================================	-->
	<!-- 2023.08.01  	김 호        	Initial Creation                            	-->
	<!-- ==============================================================================	-->
    <select id="getSpmtSlsUntprcCd" parameterType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO" resultType="com.at.apcss.am.cmns.vo.SpmtSlsUntprcRegVO">
    	<![CDATA[
	    	/* com.at.apcss.am.cmns.mapper.SpmtSlsUntprcRegMapper.getSpmtSlsUntprcReg */
			SELECT FN_GET_ID_SPMT_SLS_UNTPRC_CD(#{apcCd}) AS SPMT_SLS_UNTPRC_CD FROM DUAL
		]]>
    </select>
</mapper>