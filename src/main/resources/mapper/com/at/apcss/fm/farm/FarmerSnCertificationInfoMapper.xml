<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : Bfarmapper.xml                                    				-->
<!-- DESC : 게시판 정보 mapper                                             			-->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2023.06.29  	jcshin        	Initial Creation                            -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper">

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.selectFarmerSnCertificationInfo	-->
	<!-- DESC : 게시판 테이블 단건조회.                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.06.29  	jcshin        	Initial Creation                            -->
	<!-- ==========================================================================	-->

	<select id="selectFarmerSnCertificationInfo" parameterType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO" resultType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO">
		<![CDATA[
			SELECT /* com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.selectFarmerSnCertificationInfo */

				FRMERNO
				, CERT_NO
				, CERT_BGNG_YMD
				, CERT_END_YMD
				, CERT_STTS
				, ECFRD_CERT_SE_NM
				, ECFRD_CERT_GROUP_SE_NM
				, GRP_NM
				, OWNR_NM
				, CERT_ADDR
				, SFC

				, SN

				, DEL_YN
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_FRST_INPT_USER_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_PRGRM_ID
				, SYS_LAST_CHG_USER_ID
			FROM USRAM.TB_AX_FRMER_SN_CERT_INFO
			WHERE 1=1
		]]>
			<if test='frmerno != null and frmerno != ""'>
				AND FRMERNO = #{frmerno}
			</if>
		ORDER BY SYS_LAST_CHG_DT DESC
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.selectFarmerSnCertificationInfoList	-->
	<!-- DESC : 게시판 테이블 목록 조회.                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.06.29  	jcshin        	Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectFarmerSnCertificationInfoList" parameterType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO" resultType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO">
		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			SELECT
				  ROWNUM AS ROW_SEQ
				, COUNT(*) OVER() AS TOTAL_RECORD_COUNT
				, pt0.*
			  FROM (
		</if>

		<![CDATA[
			SELECT /* com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.selectFarmerSnCertificationInfoList */
				FRMERNO
				, CERT_NO
				, CERT_BGNG_YMD
				, CERT_END_YMD
				, CERT_STTS
				, ECFRD_CERT_SE_NM
				, ECFRD_CERT_GROUP_SE_NM
				, GRP_NM
				, OWNR_NM
				, CERT_ADDR
				, SFC

				, SN

				, DEL_YN
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_FRST_INPT_USER_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_PRGRM_ID
				, SYS_LAST_CHG_USER_ID
			FROM USRAM.TB_AX_FRMER_SN_CERT_INFO
			WHERE 1=1
		]]>
			<if test='frmerno != null and frmerno != ""'>
				AND FRMERNO = #{frmerno}
			</if>
			ORDER BY SYS_LAST_CHG_DT DESC

		<!-- 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			  ) pt0
			OFFSET (#{currentPageNo} - 1) * #{recordCountPerPage} ROWS
			FETCH FIRST #{recordCountPerPage} ROWS ONLY
		</if>
	</select>


	<insert id="insertFarmerSnCertificationInfo" parameterType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO">
		<![CDATA[
		INSERT /* com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.insertFarmerSnCertificationInfo */
			  INTO TB_AX_FRMER_SN_CERT_INFO
				(
					  FRMERNO
					, CERT_NO
					, CERT_BGNG_YMD
					, CERT_END_YMD
					, CERT_STTS
					, ECFRD_CERT_SE_NM
					, ECFRD_CERT_GROUP_SE_NM
					, GRP_NM
					, OWNR_NM
					, CERT_ADDR
					, SFC

					, SYS_FRST_INPT_DT
					, SYS_FRST_INPT_PRGRM_ID
					, SYS_FRST_INPT_USER_ID
					, SYS_LAST_CHG_DT
					, SYS_LAST_CHG_PRGRM_ID
					, SYS_LAST_CHG_USER_ID
				)
			VALUES
				(
					  #{frmerno}
					, #{certNo}
					, #{certBgngYmd}
					, #{certEndYmd}
					, #{certStts}
					, #{ecfrdCertSeNm}
					, #{ecfrdCertGroupSeNm}
					, #{grpNm}
					, #{ownrNm}
					, #{certAddr}
					, #{sfc}

					, SYSDATE
					, #{sysFrstInptUserId}
					, #{sysFrstInptPrgrmId}
					, SYSDATE
					, #{sysLastChgUserId}
					, #{sysLastChgPrgrmId}
				)
		]]>
	</insert>

	<insert id="insertLogFarmerSnCertificationInfo" parameterType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO">
	<![CDATA[
		INSERT /* com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.insertLogFarmerSnCertificationInfo */
			  INTO TB_AX_FRMER_SN_CERT_INFO_LOG
				(
					  FRMERNO
					, CERT_NO
					, CERT_BGNG_YMD
					, CERT_END_YMD
					, CERT_STTS
					, ECFRD_CERT_SE_NM
					, ECFRD_CERT_GROUP_SE_NM
					, GRP_NM
					, OWNR_NM
					, CERT_ADDR
					, SFC

					, SYS_FRST_INPT_DT
					, SYS_FRST_INPT_PRGRM_ID
					, SYS_FRST_INPT_USER_ID
					, SYS_LAST_CHG_DT
					, SYS_LAST_CHG_PRGRM_ID
					, SYS_LAST_CHG_USER_ID
				)
			VALUES
				(
					  #{frmerno}
					, #{certNo}
					, #{certBgngYmd}
					, #{certEndYmd}
					, #{certStts}
					, #{ecfrdCertSeNm}
					, #{ecfrdCertGroupSeNm}
					, #{grpNm}
					, #{ownrNm}
					, #{certAddr}
					, #{sfc}

					, SYSDATE
					, #{sysFrstInptUserId}
					, #{sysFrstInptPrgrmId}
					, SYSDATE
					, #{sysLastChgUserId}
					, #{sysLastChgPrgrmId}
				)
		]]>
	</insert>


	<update id="updateFarmerSnCertificationInfo" parameterType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO">
		<![CDATA[
			UPDATE /* com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.upateFarmerSnCertificationInfo */
				TB_AX_FRMER_SN_CERT_INFO
			   SET
				  tgt.MNGMST_REGNO				=#{mngmstRegno}
				, tgt.CRCLM_CD					=#{crclmCd}
				, tgt.FLNM						=#{flNm}
				, tgt.EDNST_NM					=#{ednstNm}
				, tgt.CRCLM_NM					=#{crclmNm}
				, tgt.EDU_BGNG_YMD				=#{eduBgngYmd}
				, tgt.EDU_END_YMD				=#{eduEndYmd}
				, tgt.IDNTY_YN					=#{idntyYn}
		]]>
		<if test='delYn != null and delYn != ""'>
				, DEL_YN 	= #{delYn}
		</if>
		<![CDATA[
				, SYS_LAST_CHG_DT		= SYSDATE
				, SYS_LAST_CHG_USER_ID	= #{sysLastChgUserId}
				, SYS_LAST_CHG_PRGRM_ID	= #{sysLastChgPrgrmId}

			WHERE 1=1
				AND FRMERNO			= #{frmerno}
				AND SN				= #{sn}
		]]>
	</update>

	<delete id="deleteFarmerSnCertificationInfo" parameterType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO">
		<![CDATA[
		DELETE FROM TB_AX_FRMER_SN_CERT_INFO /* com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.deleteFarmerSnCertificationInfo */
		WHERE 1=1
		  AND FRMERNO		= #{frmerno}
		]]>
		<if test='sn != null and sn != ""'>
		  AND SN			= #{sn}
		</if>
	</delete>

	<select id="selectFrmerSnList" parameterType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO" resultType="com.at.apcss.fm.farm.vo.FarmerSnCertificationInfoVO">
		SELECT /* com.at.apcss.fm.farm.mapper.FarmerSnCertificationInfoMapper.selectFrmerSnList */
			FRMERNO
		FROM TB_AX_FRMER_INFO
		<if test='frmerno != null and frmerno != ""'>
			AND FRMERNO = #{frmerno}
		</if>
	</select>

</mapper>