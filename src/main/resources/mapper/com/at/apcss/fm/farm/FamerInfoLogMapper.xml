<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : Bfarmapper.xml                                    				-->
<!-- DESC : 게시판 정보 mapper                                             			-->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2023.06.29  	jcshin        	Initial Creation                            -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.fm.farm.mapper.FarmerInfoLogMapper">


	   <select id="selectFarmerInfoLog" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO" resultType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
    	<![CDATA[
			SELECT /* com.at.apcss.fm.farm.mapper.farmerInfoLogMapper.selectFarmerInfoLog */
				  SN                                 as SEQ
				, FRMERNO                            as FRMER_SN
				, MNGMST_REGNO                       as BZOB_RGNO
				, ADMST_OWNR_REL                     as MNGER_RELATE
				, ADMST_OWNR_CORP_NM                 as BZM_CORP_NM
				, ADMST_OWNR_RGDT_ADDR               as ADDR
				, ADMST_OWNR_ACTL_HBTN_ADDR          as RRSD_ADDR
			    , ADMST_OWNR_DADDR                   as RDNM_ADDR
				, VLG_NM                             as TW_NM
				, PRSNA_CORP_SE_CD                   as PER_CORP_DVCD_NM
				, CTZN_FNGNR_SE_CD                   as NAFO_DVCD_NM
				, TELNO                              as TELNO
				, MOBLNO                             as MBL_TELNO
				, FXNO                               as FAX_TELNO
				, EML_ADDR                           as EMAIL_ADDR
				, AGRC_BGNG_YMD                      as FAMG_STR_YMD
				, FRMNG_BGNG_SHAP                    as FARMNG_BEGIN_STLE_CD_NM
				, FRMNG_ENGG_SHAP                    as FARMNG_ENGAGE_STLE_CD_NM
				, FNDN_YR                            as FNDT_YR
				, BRNO                               as BZM_RGNO
				, RPRSV_NM                           as REPR_NM
				, RPRSV_ADDR                         as REPR_ADDR
				, BRDT                               as BRTHDY
				, SXDC                               as SEXDSTN
				, REG_SE_CD                          as REG_SE_CD
				, RMRK                               as RMRK
				, DEL_YN                             as DEL_YN
				, SYS_FRST_INPT_DT                   as SYS_FRST_INPT_DT
				, SYS_FRST_INPT_PRGRM_ID             as SYS_FRST_INPT_USER_ID
				, SYS_FRST_INPT_USER_ID              as SYS_FRST_INPT_PRGRM_ID
				, SYS_LAST_CHG_DT                    as SYS_LAST_CHG_DT
				, SYS_LAST_CHG_PRGRM_ID              as SYS_LAST_CHG_USER_ID
				, SYS_LAST_CHG_USER_ID               as SYS_LAST_CHG_PRGRM_ID
			  FROM TB_AX_FRMER_INFO_LOG 
			 WHERE 1=1

    	]]>
     		<if test='frmerSn != null and frmerSn != ""'>
				AND FRMERNO LIKE #{frmerSn} || '%'
			</if>
			<if test='bzobRgno != null and bzobRgno != ""'>
				AND MNGMST_REGNO LIKE '%' || #{bzobRgno} || '%'
			</if>
			<if test='brthdy != null and brthdy != ""'>
				AND BRDT LIKE '%' || #{brthdy} || '%'
			</if>
		ORDER BY SYS_LAST_CHG_DT DESC
    </select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.fm.bbs.mapper.BfarmngMapper.selectBbsList			-->
	<!-- DESC : 게시판 테이블 목록 조회.                                             		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.06.29  	jcshin        	Initial Creation                            -->
	<!-- ==========================================================================	-->
    <select id="selectFarmerInfoLogList" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO" resultType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
    	<![CDATA[
			SELECT /* com.at.apcss.fm.farm.mapper.farmerInfoLogMapper.selectFarmerInfoLogList */
				  SN                                 as SEQ
				, FRMERNO                            as FRMER_SN
				, MNGMST_REGNO                       as BZOB_RGNO
				, ADMST_OWNR_REL                     as MNGER_RELATE
				, ADMST_OWNR_CORP_NM                 as BZM_CORP_NM
				, ADMST_OWNR_RGDT_ADDR               as ADDR
				, ADMST_OWNR_ACTL_HBTN_ADDR          as RRSD_ADDR
			    , ADMST_OWNR_DADDR                   as RDNM_ADDR
				, VLG_NM                             as TW_NM
				, PRSNA_CORP_SE_CD                   as PER_CORP_DVCD_NM
				, CTZN_FNGNR_SE_CD                   as NAFO_DVCD_NM
				, TELNO                              as TELNO
				, MOBLNO                             as MBL_TELNO
				, FXNO                               as FAX_TELNO
				, EML_ADDR                           as EMAIL_ADDR
				, AGRC_BGNG_YMD                      as FAMG_STR_YMD
				, FRMNG_BGNG_SHAP                    as FARMNG_BEGIN_STLE_CD_NM
				, FRMNG_ENGG_SHAP                    as FARMNG_ENGAGE_STLE_CD_NM
				, FNDN_YR                            as FNDT_YR
				, BRNO                               as BZM_RGNO
				, RPRSV_NM                           as REPR_NM
				, RPRSV_ADDR                         as REPR_ADDR
				, BRDT                               as BRTHDY
				, SXDC                               as SEXDSTN
				, REG_SE_CD                          as REG_SE_CD
				, RMRK                               as RMRK
				, DEL_YN                             as DEL_YN
				, SYS_FRST_INPT_DT                   as SYS_FRST_INPT_DT
				, SYS_FRST_INPT_PRGRM_ID             as SYS_FRST_INPT_USER_ID
				, SYS_FRST_INPT_USER_ID              as SYS_FRST_INPT_PRGRM_ID
				, SYS_LAST_CHG_DT                    as SYS_LAST_CHG_DT
				, SYS_LAST_CHG_PRGRM_ID              as SYS_LAST_CHG_USER_ID
				, SYS_LAST_CHG_USER_ID               as SYS_LAST_CHG_PRGRM_ID
			  FROM TB_AX_FRMER_INFO_LOG 
			 WHERE 1=1

    	]]>
     		<if test='frmerSn != null and frmerSn != ""'>
				AND FRMERNO LIKE #{frmerSn} || '%'
			</if>
			<if test='bzobRgno != null and bzobRgno != ""'>
				AND MNGMST_REGNO LIKE '%' || #{bzobRgno} || '%'
			</if>
			<if test='brthdy != null and brthdy != ""'>
				AND BRDT LIKE '%' || #{brthdy} || '%'
			</if>
		ORDER BY SYS_LAST_CHG_DT DESC
    </select>


	<insert id="insertFarmerInfoLog" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
    	<![CDATA[
	    	INSERT /* com.at.apcss.fm.farm.mapper.farmerInfoLogMapper.insertFarmerInfoLog */
	    	  INTO TB_AX_FRMER_INFO_LOG
	    		(
	    		      FRMERNO
					, MNGMST_REGNO
					, ADMST_OWNR_REL
					, ADMST_OWNR_CORP_NM
					, ADMST_OWNR_RGDT_ADDR
					, ADMST_OWNR_ACTL_HBTN_ADDR
					, ADMST_OWNR_DADDR
					, VLG_NM
					, PRSNA_CORP_SE_CD
					, CTZN_FNGNR_SE_CD
					, TELNO
					, MOBLNO
					, FXNO
					, EML_ADDR
					, AGRC_BGNG_YMD
					, FRMNG_BGNG_SHAP
					, FRMNG_ENGG_SHAP
					, FNDN_YR
					, BRNO
					, RPRSV_NM
					, RPRSV_ADDR
					, BRDT
					, SXDC
					, REG_SE_CD
					, SYS_FRST_INPT_DT
					, SYS_FRST_INPT_PRGRM_ID
					, SYS_FRST_INPT_USER_ID
					, SYS_LAST_CHG_DT
					, SYS_LAST_CHG_PRGRM_ID
					, SYS_LAST_CHG_USER_ID
	    		)
	   		VALUES
	   			(
	   			     #{frmerSn}
					,#{bzobRgno}
					,#{mngerRelate}
					,#{bzmCorpNm}
					,#{addr}
					,#{rrsdAddr}
					,#{rdnmAddr}
					,#{twNm}
					,#{perCorpDvcdNm}
					,#{nafoDvcdNm}
					,#{telno}
					,#{mblTelno}
					,#{faxTelno}
					,#{emailAddr}
					,#{famgStrYmd}
					,#{farmngBeginStleCdNm}
					,#{farmngEngageStleCdNm}
					,#{fndtYr}
					,#{bzmRgno}
					,#{reprNm}
					,#{reprAddr}
					,#{brthdy}
					,#{sexdstn}
					,#{saveCd}
					,SYSDATE
					,#{sysFrstInptUserId}
					,#{sysFrstInptPrgrmId}
					,SYSDATE
					,#{sysLastChgUserId}
					,#{sysLastChgPrgrmId}
	   			)
    	]]>
    </insert>




    <insert id="insertMegerFarmerInfoLog" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
	<![CDATA[
    	MERGE INTO TB_FARMER_INFO_LOG CLT  /* com.at.apcss.fm.farm.mapper.FarmerInfoLogMapper.insertMegerFarmerInfoLog */
		USING DUAL
			ON (	         CLT.FRMER_SN      = #{frmerSn}
				      AND CLT.BZOB_RGNO  =  #{bzobRgno}
				   )
		WHEN MATCHED THEN
			UPDATE /* com.at.apcss.fm.farm.mapper.FarmerInfoLogMapper.insertMegerfarmerInfoLog */
			   SET
			 	  MNGER_RELATE 	= #{mngerRelate}
				, BZM_CORP_NM 	= #{bzmCorpNm}
				, ADDR 	= #{addr}
				, RRSD_ADDR 	= #{rrsdAddr}
			    , RDNM_ADDR 	= #{rdnmAddr}
				, TW_NM 	= #{twNm}
				, PER_CORP_DVCD_NM 	= #{perCorpDvcdNm}
				, NAFO_DVCD_NM 	= #{nafoDvcdNm}
				, TELNO 	= #{telno}
				, MBL_TELNO 	= #{mblTelno}
				, FAX_TELNO 	= #{faxTelno}
				, EMAIL_ADDR 	= #{emailAddr}
				, FAMG_STR_YMD 	= #{famgStrYmd}
				, FARMNG_BEGIN_STLE_CD_NM 	= #{farmngBeginStleCdNm}
				, FARMNG_ENGAGE_STLE_CD_NM 	= #{farmngEngageStleCdNm}
				, FNDT_YR 	= #{fndtYr}
				, BZM_RGNO 	= #{bzmRgno}
				, REPR_NM 	= #{reprNm}
				, REPR_ADDR 	= #{reprAddr}
				, BRTHDY 	= #{brthdy}
				, SEXDSTN 	= #{sexdstn}
				, SAVE_CD 	= #{saveCd}
		WHEN NOT MATCHED THEN
			 INSERT /* com.at.apcss.fm.farm.mapper.FarmerInfoLogMapper.insertMegerfarmerInfoLog */
	    		(
	    		  FRMER_SN
				, BZOB_RGNO
				, MNGER_RELATE
				, BZM_CORP_NM
				, ADDR
				, RRSD_ADDR
			    , RDNM_ADDR
				, TW_NM
				, PER_CORP_DVCD_NM
				, NAFO_DVCD_NM
				, TELNO
				, MBL_TELNO
				, FAX_TELNO
				, EMAIL_ADDR
				, FAMG_STR_YMD
				, FARMNG_BEGIN_STLE_CD_NM
				, FARMNG_ENGAGE_STLE_CD_NM
				, FNDT_YR
				, BZM_RGNO
				, REPR_NM
				, REPR_ADDR
				, BRTHDY
				, SEXDSTN
				, SAVE_CD
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_USER_ID
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_USER_ID
				, SYS_LAST_CHG_PRGRM_ID
	    		)
	   		VALUES
	   			(
	   			    #{frmerSn}
					,#{bzobRgno}
					,#{mngerRelate}
					,#{bzmCorpNm}
					,#{addr}
					,#{rrsdAddr}
					,#{rdnmAddr}
					,#{twNm}
					,#{perCorpDvcdNm}
					,#{nafoDvcdNm}
					,#{telno}
					,#{mblTelno}
					,#{faxTelno}
					,#{emailAddr}
					,#{famgStrYmd}
					,#{farmngBeginStleCdNm}
					,#{farmngEngageStleCdNm}
					,#{fndtYr}
					,#{bzmRgno}
					,#{reprNm}
					,#{reprAddr}
					,#{brthdy}
					,#{sexdstn}
					,#{saveCd}
					,SYSDATE
					,#{sysFrstInptUserId}
					,#{sysFrstInptPrgrmId}
					,SYSDATE
					,#{sysLastChgUserId}
					,#{sysLastChgPrgrmId}
	   			)
    	]]>
	</insert>


    <insert id="insertMegerLogFarmerInfoLog" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
	<![CDATA[
    	INSERT /* com.at.apcss.fm.farm.mapper.farmerInfoLogMapper.insertMegerLogFarmerInfoLog */
	    	  INTO TB_AX_FRMER_INFO_LOG
	    	  (       SN    
	    		    , FRMERNO
					, MNGMST_REGNO
					, ADMST_OWNR_REL
					, ADMST_OWNR_CORP_NM
					, ADMST_OWNR_RGDT_ADDR
					, ADMST_OWNR_ACTL_HBTN_ADDR
					, ADMST_OWNR_DADDR
					, VLG_NM
					, PRSNA_CORP_SE_CD
					, CTZN_FNGNR_SE_CD
					, TELNO
					, MOBLNO
					, FXNO
					, EML_ADDR
					, AGRC_BGNG_YMD
					, FRMNG_BGNG_SHAP
					, FRMNG_ENGG_SHAP
					, FNDN_YR
					, BRNO
					, RPRSV_NM
					, RPRSV_ADDR
					, BRDT
					, SXDC
					, REG_SE_CD
					, SYS_FRST_INPT_DT
					, SYS_FRST_INPT_PRGRM_ID
					, SYS_FRST_INPT_USER_ID
					, SYS_LAST_CHG_DT
					, SYS_LAST_CHG_PRGRM_ID
					, SYS_LAST_CHG_USER_ID
	    		)
	   		VALUES
	   			(
	   			      (SELECT NVL(MAX(SN),0)+1 FROM TB_AX_FRMER_INFO_LOG)
	   			    ,#{frmerSn}
					,#{bzobRgno}
					,#{mngerRelate}
					,#{bzmCorpNm}
					,#{addr}
					,#{rrsdAddr}
					,#{rdnmAddr}
					,#{twNm}
					,#{perCorpDvcdNm}
					,#{nafoDvcdNm}
					,#{telno}
					,#{mblTelno}
					,#{faxTelno}
					,#{emailAddr}
					,#{famgStrYmd}
					,#{farmngBeginStleCdNm}
					,#{farmngEngageStleCdNm}
					,#{fndtYr}
					,#{bzmRgno}
					,#{reprNm}
					,#{reprAddr}
					,#{brthdy}
					,#{sexdstn}
					,#{saveCd}
					,SYSDATE
					,#{sysFrstInptUserId}
					,#{sysFrstInptPrgrmId}
					,SYSDATE
					,#{sysLastChgUserId}
					,#{sysLastChgPrgrmId}
	   			)
    	]]>
	</insert>

	<update id="updateFarmerInfoLog" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
    	<![CDATA[
	    	UPDATE /* com.at.apcss.fm.farm.mapper.farmerInfoLogMapper.upateFarmerInfoLog */
	    		TB_FARMER_INFO_LOG
			   SET
			 	  MNGER_RELATE 	= #{mngerRelate}
				, BZM_CORP_NM 	= #{bzmCorpNm}
				, ADDR 	= #{addr}
				, RRSD_ADDR 	= #{rrsdAddr}
			    , RDNM_ADDR 	= #{rdnmAddr}
				, TW_NM 	= #{twNm}
				, PER_CORP_DVCD_NM 	= #{perCorpDvcdNm}
				, NAFO_DVCD_NM 	= #{nafoDvcdNm}
				, TELNO 	= #{telno}
				, MBL_TELNO 	= #{mblTelno}
				, FAX_TELNO 	= #{faxTelno}
				, EMAIL_ADDR 	= #{emailAddr}
				, FAMG_STR_YMD 	= #{famgStrYmd}
				, FARMNG_BEGIN_STLE_CD_NM 	= #{farmngBeginStleCdNm}
				, FARMNG_ENGAGE_STLE_CD_NM 	= #{farmngEngageStleCdNm}
				, FNDT_YR 	= #{fndtYr}
				, BZM_RGNO 	= #{bzmRgno}
				, REPR_NM 	= #{reprNm}
				, REPR_ADDR 	= #{reprAddr}
				, BRTHDY 	= #{brthdy}
				, SEXDSTN 	= #{sexdstn}
				, SAVE_CD 	= #{saveCd}
    	]]>
		<if test='delYn != null and delYn != ""'>
				, DEL_YN 	= #{delYn}
		</if>
    	<![CDATA[
				, SYS_LAST_CHG_DT		= SYSDATE
	    		, SYS_LAST_CHG_USER_ID	= #{sysLastChgUserId}
	    		, SYS_LAST_CHG_PRGRM_ID	= #{sysLastChgPrgrmId}

			 WHERE 1=1
			    AND FRMER_SN 	    = #{frmerSn}
		        AND BZOB_RGNO 	= #{bzobRgno}
    	]]>
    </update>

    <update id="updateMegerFarmerInfoLog" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
    	<![CDATA[
	    	MERGE INTO TB_FARMER_INFO_LOG CLT  /* com.at.apcss.fm.farm.mapper.FarmerInfoLogMapper.insertMegerFarmerInfoLog */
		USING DUAL
			ON (	         CLT.FRMER_SN      = #{frmerSn}
				      AND CLT.BZOB_RGNO  =  #{bzobRgno}
				   )
		WHEN MATCHED THEN
			UPDATE /* com.at.apcss.fm.farm.mapper.FarmerInfoLogMapper.insertMegerfarmerInfoLog */
			   SET
			 	  MNGER_RELATE 	= #{mngerRelate}
				, BZM_CORP_NM 	= #{bzmCorpNm}
				, ADDR 	= #{addr}
				, RRSD_ADDR 	= #{rrsdAddr}
			    , RDNM_ADDR 	= #{rdnmAddr}
				, TW_NM 	= #{twNm}
				, PER_CORP_DVCD_NM 	= #{perCorpDvcdNm}
				, NAFO_DVCD_NM 	= #{nafoDvcdNm}
				, TELNO 	= #{telno}
				, MBL_TELNO 	= #{mblTelno}
				, FAX_TELNO 	= #{faxTelno}
				, EMAIL_ADDR 	= #{emailAddr}
				, FAMG_STR_YMD 	= #{famgStrYmd}
				, FARMNG_BEGIN_STLE_CD_NM 	= #{farmngBeginStleCdNm}
				, FARMNG_ENGAGE_STLE_CD_NM 	= #{farmngEngageStleCdNm}
				, FNDT_YR 	= #{fndtYr}
				, BZM_RGNO 	= #{bzmRgno}
				, REPR_NM 	= #{reprNm}
				, REPR_ADDR 	= #{reprAddr}
				, BRTHDY 	= #{brthdy}
				, SEXDSTN 	= #{sexdstn}
				, SAVE_CD 	= #{saveCd}
		WHEN NOT MATCHED THEN
			 INSERT /* com.at.apcss.fm.farm.mapper.FarmerInfoLogMapper.insertMegerfarmerInfoLog */
	    		(
	    		  FRMER_SN
				, BZOB_RGNO
				, MNGER_RELATE
				, BZM_CORP_NM
				, ADDR
				, RRSD_ADDR
			    , RDNM_ADDR
				, TW_NM
				, PER_CORP_DVCD_NM
				, NAFO_DVCD_NM
				, TELNO
				, MBL_TELNO
				, FAX_TELNO
				, EMAIL_ADDR
				, FAMG_STR_YMD
				, FARMNG_BEGIN_STLE_CD_NM
				, FARMNG_ENGAGE_STLE_CD_NM
				, FNDT_YR
				, BZM_RGNO
				, REPR_NM
				, REPR_ADDR
				, BRTHDY
				, SEXDSTN
				, SAVE_CD
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_USER_ID
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_USER_ID
				, SYS_LAST_CHG_PRGRM_ID
	    		)
	   		VALUES
	   			(
	   			    #{frmerSn}
					,#{bzobRgno}
					,#{mngerRelate}
					,#{bzmCorpNm}
					,#{addr}
					,#{rrsdAddr}
					,#{rdnmAddr}
					,#{twNm}
					,#{perCorpDvcdNm}
					,#{nafoDvcdNm}
					,#{telno}
					,#{mblTelno}
					,#{faxTelno}
					,#{emailAddr}
					,#{famgStrYmd}
					,#{farmngBeginStleCdNm}
					,#{farmngEngageStleCdNm}
					,#{fndtYr}
					,#{bzmRgno}
					,#{reprNm}
					,#{reprAddr}
					,#{brthdy}
					,#{sexdstn}
					,#{saveCd}
					,SYSDATE
					,#{sysFrstInptUserId}
					,#{sysFrstInptPrgrmId}
					,SYSDATE
					,#{sysLastChgUserId}
					,#{sysLastChgPrgrmId}
	   			)
    	]]>
    </update>


	<delete id="deleteFarmerInfoLog" parameterType="com.at.apcss.fm.farm.vo.FarmerInfoLogVO">
		<![CDATA[
		DELETE FROM TB_FARMER_INFO_LOG
		 WHERE 1=1
		      AND FRMER_SN 	    = #{frmerSn}
		      AND BZOB_RGNO 	= #{bzobRgno}
		]]>
	</delete>

</mapper>