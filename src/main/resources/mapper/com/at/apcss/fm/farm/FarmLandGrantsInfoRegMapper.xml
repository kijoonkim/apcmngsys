<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : Bfarmapper.xml                                    				-->
<!-- DESC : 게시판 정보 mapper                                             			-->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2023.06.29  	jcshin        	Initial Creation                            -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.fm.farm.mapper.FarmLandGrantsInfoRegMapper">

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.fm.bbs.mapper.BfarmngMapper.selectBbs				-->
	<!-- DESC : 게시판 테이블 단건조회.											 		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR			DESCRIPTION					  			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.06.29  	jcshin			Initial Creation							-->
	<!-- ==========================================================================	-->

	<select id="selectFarmLandGrantsInfoReg" parameterType="com.at.apcss.fm.farm.vo.FarmLandGrantsInfoRegVO" resultType="com.at.apcss.fm.farm.vo.FarmLandGrantsInfoRegVO">
		<![CDATA[
			SELECT /* com.at.apcss.fm.farm.mapper.FarmLandGrantsInfoRegMapper.selectFarmLandGrantsInfoReg */
				FRMERNO
				, PNU_CD
				, BIZ_BGNG_YMD
				, BIZ_END_YMD
				, BIZ_CD
				, BIZ_NM
				, STTS
				, APLCNT_NM
				, LDGR_SE
				, FRLN_ADDR
				, STDG_CD
				, MNO
				, SNO
				, APLY_SFC

				, SN

				, DEL_YN
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_FRST_INPT_USER_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_PRGRM_ID
				, SYS_LAST_CHG_USER_ID
			FROM USRAM.TB_AX_FARM_LAND_GRANTS_INFO
			WHERE 1=1
		]]>
			<if test='frmerno != null and frmerno != ""'>
				AND FRMERNO = #{frmerno}
			</if>
		ORDER BY SYS_LAST_CHG_DT DESC
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.fm.bbs.mapper.BfarmngMapper.selectBbsList			-->
	<!-- DESC : 게시판 테이블 목록 조회.											 		-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR			DESCRIPTION					  			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2023.06.29  	jcshin			Initial Creation							-->
	<!-- ==========================================================================	-->
	<select id="selectFarmLandGrantsInfoRegList" parameterType="com.at.apcss.fm.farm.vo.FarmLandGrantsInfoRegVO" resultType="com.at.apcss.fm.farm.vo.FarmLandGrantsInfoRegVO">
		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			SELECT
				  ROWNUM AS ROW_SEQ
				, COUNT(*) OVER() AS TOTAL_RECORD_COUNT
				, pt0.*
			  FROM (
		</if>

		<![CDATA[
			SELECT /* com.at.apcss.fm.farm.mapper.FarmLandGrantsInfoRegMapper.selectFarmLandGrantsInfoRegList */
				FRMERNO
				, PNU_CD
				, BIZ_BGNG_YMD
				, BIZ_END_YMD
				, BIZ_CD
				, BIZ_NM
				, STTS
				, APLCNT_NM
				, LDGR_SE
				, FRLN_ADDR
				, STDG_CD
				, MNO
				, SNO
				, APLY_SFC

				, SN

				, DEL_YN
				, SYS_FRST_INPT_DT
				, SYS_FRST_INPT_PRGRM_ID
				, SYS_FRST_INPT_USER_ID
				, SYS_LAST_CHG_DT
				, SYS_LAST_CHG_PRGRM_ID
				, SYS_LAST_CHG_USER_ID
			FROM USRAM.TB_AX_FARM_LAND_GRANTS_INFO
			WHERE 1=1
		]]>
			<if test='frmerno != null and frmerno != ""'>
				AND FRMERNO = #{frmerno}
			</if>
			ORDER BY SYS_LAST_CHG_DT DESC

		<!-- 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			  ) pt0
			OFFSET (#{currentPageNo} - 1) * #{recordCountPerPage} ROWS
			FETCH FIRST #{recordCountPerPage} ROWS ONLY
		</if>
	</select>


	<insert id="insertMegerFarmLandGrantsInfoReg" parameterType="com.at.apcss.fm.farm.vo.FarmLandGrantsInfoRegVO">
		<![CDATA[
			MERGE INTO USRAM.TB_AX_FARM_LAND_GRANTS_INFO AS tgt	/* com.at.apcss.fm.farm.mapper.FarmerEducationInfoMapper.insertMegerFarmerEducationInfo */
			USING DUAL
				ON (
						tgt.FRMERNO			= #{frmerno}
						AND tgt.SN			= #{sn}
					)
			WHEN MATCHED THEN
				UPDATE	/* com.at.apcss.fm.farm.mapper.FarmerEducationInfoMapper.insertMegerFarmerEducationInfo */
				   SET
					  tgt.PNU_CD			=#{pnuCd}
					, tgt.BIZ_BGNG_YMD		=#{bizBgngYmd}
					, tgt.BIZ_END_YMD		=#{bizEndYmd}
					, tgt.BIZ_CD			=#{bizCd}
					, tgt.BIZ_NM			=#{bizNm}
					, tgt.STTS				=#{stts}
					, tgt.APLCNT_NM			=#{aplcntNm}
					, tgt.LDGR_SE			=#{ldgrSe}
					, tgt.FRLN_ADDR			=#{frlnAddr}
					, tgt.STDG_CD			=#{stdgCd}
					, tgt.MNO				=#{mno}
					, tgt.SNO				=#{sno}
					, tgt.APLY_SFC			=#{aplySfc}

					, tgt.SYS_LAST_CHG_DT			= SYSDATE
					, tgt.SYS_LAST_CHG_PRGRM_ID		=#{sysLastChgUserId}
					, tgt.SYS_LAST_CHG_USER_ID		=#{sysLastChgPrgrmId}
			WHEN NOT MATCHED
			THEN INSERT /* com.at.apcss.fm.farm.mapper.FarmerEducationInfoMapper.insertMegerFarmerEducationInfo */
				(
					  FRMERNO
					, PNU_CD
					, BIZ_BGNG_YMD
					, BIZ_END_YMD
					, BIZ_CD
					, BIZ_NM
					, STTS
					, APLCNT_NM
					, LDGR_SE
					, FRLN_ADDR
					, STDG_CD
					, MNO
					, SNO
					, APLY_SFC

					, SYS_FRST_INPT_DT
					, SYS_FRST_INPT_PRGRM_ID
					, SYS_FRST_INPT_USER_ID
					, SYS_LAST_CHG_DT
					, SYS_LAST_CHG_PRGRM_ID
					, SYS_LAST_CHG_USER_ID
				)
			VALUES
				(
					  #{frmerno}
					, #{pnuCd}
					, #{bizBgngYmd}
					, #{bizEndYmd}
					, #{bizCd}
					, #{bizNm}
					, #{stts}
					, #{aplcntNm}
					, #{ldgrSe}
					, #{frlnAddr}
					, #{stdgCd}
					, #{mno}
					, #{sno}
					, #{aplySfc}

					, SYSDATE
					, #{sysFrstInptUserId}
					, #{sysFrstInptPrgrmId}
					, SYSDATE
					, #{sysLastChgUserId}
					, #{sysLastChgPrgrmId}
			);
		]]>
	</insert>

	<delete id="deleteFarmLandGrantsInfoReg" parameterType="com.at.apcss.fm.farm.vo.FarmLandGrantsInfoRegVO">
		<![CDATA[
		DELETE FROM TB_AX_FARM_LAND_GRANTS_INFO /* com.at.apcss.fm.farm.mapper.FarmerEducationInfoMapper.deleteFarmerEducationInfo */
		WHERE 1=1
		  AND FRMERNO		= #{frmerno}
		  AND SN			= #{sn}
		]]>
	</delete>

</mapper>