<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- ==========================================================================	-->
<!-- NAME : BrnoPopupMapper.xml                                    				-->
<!-- DESC :  apc선택 팝업 정보 mapper                                             			-->
<!-- ==========================================================================	-->
<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
<!-- ===========  	============  	===========================================	-->
<!-- 2024.10.17  	ljw        		Initial Creation                            -->
<!-- ==========================================================================	-->

<mapper namespace="com.at.apcss.pd.popup.mapper.BrnoPopupMapper">

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.pd.popup.mapper.BrnoPopupMapper.selectBrnoList			-->
	<!-- DESC : 통합조직 목록 조회.	                                       				-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.17  	ljw        		Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectBrnoList" parameterType="com.at.apcss.pd.popup.vo.BrnoPopupVO" resultType="com.at.apcss.pd.popup.vo.BrnoPopupVO">
		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			SELECT
				  ROWNUM AS ROW_SEQ
				, COUNT(*) OVER() AS TOTAL_RECORD_COUNT
				, pt0.*
			  FROM (
		</if>
		<!-- End 페이징 -->

			<![CDATA[
			SELECT /* com.at.apcss.pd.popup.mapper.BrnoPopupMapper.selectBrnoList */
				MAX(A.OGNZ_NM)	AS CORP_NM
				, A.BRNO		AS BRNO
				, MAX(A.OGNZ_CD)	AS APO_CD
			FROM TB_APC_OGNZ_INFO A
			WHERE 1=1
			  AND OGNZ_SE_CD = '21'
			]]>
			<if test='brno != null and brno != ""'>
			  AND A.BRNO LIKE '%'||#{brno}||'%'
			</if>
			<if test='corpNm != null and corpNm != ""'>
			  AND A.OGNZ_NM LIKE '%'||#{corpNm}||'%'
			</if>
			GROUP BY BRNO
			ORDER BY CORP_NM ASC

		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			  ) pt0
			OFFSET (#{currentPageNo} - 1) * #{recordCountPerPage} ROWS
			FETCH FIRST #{recordCountPerPage} ROWS ONLY
		</if>
		<!-- End 페이징 -->
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.pd.popup.mapper.BrnoPopupMapper.selectAplyBrnoList		-->
	<!-- DESC : 통합조직 신청 리스트	                                       				-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.17  	ljw        		Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectAplyBrnoList" parameterType="com.at.apcss.pd.popup.vo.BrnoPopupVO" resultType="com.at.apcss.pd.popup.vo.BrnoPopupVO">
		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			SELECT
				  ROWNUM AS ROW_SEQ
				, COUNT(*) OVER() AS TOTAL_RECORD_COUNT
				, pt0.*
			FROM (
		</if>
		<!-- End 페이징 -->

			<![CDATA[
			SELECT /* com.at.apcss.pd.popup.mapper.BrnoPopupMapper.selectAplyBrnoList */
				EAM.BRNO
				, EAM.APO_CD

				, EA.CORP_NM
				, EA.CRNO
			FROM TB_EV_APLY_MNG EAM
				,TB_EV_APO EA
			WHERE 1=1
			  AND EAM.APO_SE = '1'
			  AND EAM.BRNO = EA.BRNO(+)
			  AND EAM.YR = #{yr}
			]]>
			<if test='brno != null and brno != ""'>
			  AND EAM.BRNO LIKE '%'||#{brno}||'%'
			</if>
			<if test='corpNm != null and corpNm != ""'>
			  AND EA.CORP_NM LIKE '%'||#{corpNm}||'%'
			</if>
			ORDER BY EA.CORP_NM ASC

		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			  ) pt0
			OFFSET (#{currentPageNo} - 1) * #{recordCountPerPage} ROWS
			FETCH FIRST #{recordCountPerPage} ROWS ONLY
		</if>
		<!-- End 페이징 -->
	</select>

	<!-- ==========================================================================	-->
	<!-- NAME : com.at.apcss.pd.popup.mapper.BrnoPopupMapper.selectBrnoMngList		-->
	<!-- DESC : 통합조직 목록 조회.	                                       				-->
	<!-- ==========================================================================	-->
	<!-- DATE   		AUTHOR        	DESCRIPTION                      			-->
	<!-- ===========  	============  	===========================================	-->
	<!-- 2024.10.17  	ljw        		Initial Creation                            -->
	<!-- ==========================================================================	-->
	<select id="selectBrnoMngList" parameterType="com.at.apcss.pd.popup.vo.BrnoPopupVO" resultType="com.at.apcss.pd.popup.vo.BrnoPopupVO">
		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			SELECT
				  ROWNUM AS ROW_SEQ
				, COUNT(*) OVER() AS TOTAL_RECORD_COUNT
				, pt0.*
			  FROM (
		</if>
		<!-- End 페이징 -->

			<![CDATA[
			SELECT /* com.at.apcss.pd.popup.mapper.BrnoPopupMapper.selectBrnoMngList */
				TEA.BRNO
				,TEA.CORP_NM
				,TEA.CRNO
				,TEA.APO_CD
				,TEA.MNO
				,TEA.SNO
				,TEA.SLCTN_YR
			FROM TB_EV_APO TEA
			WHERE 1=1
			  AND APO_CD IS NOT NULL
			]]>
			<if test='brno != null and brno != ""'>
			  AND TEA.BRNO LIKE '%'||#{brno}||'%'
			</if>
			<if test='corpNm != null and corpNm != ""'>
			  AND TEA.CORP_NM LIKE '%'||#{corpNm}||'%'
			</if>
			ORDER BY TRIM(TEA.CORP_NM) ASC

		<!-- Start 페이징 -->
		<if test='pagingYn != null and pagingYn.equals("Y")'>
			  ) pt0
			OFFSET (#{currentPageNo} - 1) * #{recordCountPerPage} ROWS
			FETCH FIRST #{recordCountPerPage} ROWS ONLY
		</if>
		<!-- End 페이징 -->
	</select>
</mapper>